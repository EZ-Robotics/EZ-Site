<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>robotics is ez Blog</title>
        <link>https://www.roboticsisez.com/projects</link>
        <description>robotics is ez Blog</description>
        <lastBuildDate>Sun, 03 Dec 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[DD-3]]></title>
            <link>https://www.roboticsisez.com/projects/dd-3</link>
            <guid>https://www.roboticsisez.com/projects/dd-3</guid>
            <pubDate>Sun, 03 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[DD-3 is a Star Wars inspired fully functional droid. Built with personality in mind, DD-3 uses automation to give servos life and make DD-3 into a convincing character.]]></description>
            <content:encoded><![CDATA[<p>DD-3 is a Star Wars inspired fully functional droid. Built with personality in mind, DD-3 uses automation to give servos life and make DD-3 into a convincing character.</p>
<p>Build log, from the start.  Click <code>Read More</code>!</p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-3d5ee057c88fb0f44f879ff0842602b8.jpg" width="1080" height="1080" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="d-o">D-O<a href="https://www.roboticsisez.com/projects/dd-3#d-o" class="hash-link" aria-label="Direct link to D-O" title="Direct link to D-O">​</a></h2>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This section is WIP</p></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="open-sauce-2023">Open Sauce 2023<a href="https://www.roboticsisez.com/projects/dd-3#open-sauce-2023" class="hash-link" aria-label="Direct link to Open Sauce 2023" title="Direct link to Open Sauce 2023">​</a></h2>
<p>I didn't work on this project for ~3 weeks after it ate my finger.  The next time I was running it, I needed to implement safeties to stop something like that from happening.</p>
<p>At Open Sauce I saw some self-balancing robots that used the same mpu6050 that I was trying to balance with which gave me more confidence that I could pull off what I was trying to pull off.</p>
<p>I also ran into the R2 Builders booth and discussed it with <a href="https://www.curiousmarc.com/home" target="_blank" rel="noopener noreferrer">CuriousMarc</a>.  I remember watching his YouTube videos back in ~2016, it was very cool to meet him.  He let me look inside the droid and we spoke for a bit.  He told me to start simple before jumping into a larger project like an R2. I realized then I had to simplify this project to get it done and making the entire project rely on something I wasn't 100% sure would work as well as I hoped was concerning.</p>
<p>I started looking into drawings of droids and stumbled across this which feels so perfect.  It has the D-O tire but adds arms, and the body looks like an R2 but the head is a BB-8.  It seems perfect, and this became my reference photo for simplifying the project.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/dd3_sketch-bd468cbc499e61a11316c22fa93e61c2.png" width="1920" height="1069" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="long-beach-comic-con-2023">Long Beach Comic Con 2023<a href="https://www.roboticsisez.com/projects/dd-3#long-beach-comic-con-2023" class="hash-link" aria-label="Direct link to Long Beach Comic Con 2023" title="Direct link to Long Beach Comic Con 2023">​</a></h2>
<p>Goal: September 2-3, 2023</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="plans">Plans<a href="https://www.roboticsisez.com/projects/dd-3#plans" class="hash-link" aria-label="Direct link to Plans" title="Direct link to Plans">​</a></h3>
<p>I saw there was a convention on September 2 and 3 and decided to sign up.  This would be my deadline for getting the robot functional.  I'd like to recreate the image the best I can.</p>
<p>A big requirement is for this robot to have personality.  Nothing matches the personality of WALL-E, but I'd like to do as much as I can to give this personality.  Something great about Chopper is the head tilt.  It adds so many characters and it is something I'll be implementing in this robot.</p>
<p>The electronics plan is to use a Teensy 3.2 in the body and the head and communicate over serial between the two.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="design-and-assembly">Design and Assembly<a href="https://www.roboticsisez.com/projects/dd-3#design-and-assembly" class="hash-link" aria-label="Direct link to Design and Assembly" title="Direct link to Design and Assembly">​</a></h3>
<p>The first thing I needed to do was check the dimensions.  I can't easily modify the width of the robot, so I need to make sure the width of the body looks about correct. I took some construction paper to see how I felt about it, and the dimensions I liked were the same as the scaled dimensions from the reference image.  Moving forward I'll just grab dimensions from the reference image.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/paper_body-550fb52d105c9acfdaab1a6ae84e6420.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>The main challenge with this is figuring out how to have a structure above the wheels that gets covered by the body.  I decided to build a T inside the robot where the edges of the T will sit above the wheel.  I replaced the servo mounts with a shoe-horn-like piece that has a 1/2" aluminum angle gets mounted to.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/printed_structure-4154d76e16e943ae8c282c98f2dbf6bb.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/structure_with_alu-185589ab59389c7a88a3ce31e2adac81.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>The legs needed to get mounted diagonally and needed a mount at the end of this T structure.  How this piece is designed changes how the T exactly gets made so I decided to design this first.  This has captive nuts and sits inside of the 1/2" angle.  I also needed to make sure there was space at the corners for the body to sit, which distances the length of the arms on the T.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/leg_mount-c2c5a6b39de4e91b890ba471fb528496.png" width="973" height="743" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/leg_mount_in_body-f388adbd938653cc9d644d1ab06d832b.png" width="960" height="792" class="img_ev3q"></p>
<p>Through this, I also realized that any decorative cover that goes over the wheel is affected by this.  There is a limit to the thickness of it based on the leg mount shown above because there is a slight overhang on the leg mount to the wheel.  I made a test wheel cap to make sure clearance is all good.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/first_wheel_cap-f396e14d986d4bfec0c50b5aeed2f596.png" width="846" height="760" class="img_ev3q"></p>
<p>I got a little too into it and ended up designing a wheel cap more and I printed it to see it.  This will become the first part I play with finishing and making it look like it's not 3D printed.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/first_printed_wheel_cap-46b5a15702c538e2265eb8c9b5031ef3.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I got both servo mounts replaced with the new horseshoe pieces and got all 4 pieces of angle on.  I have screws going through in multiple axes and have standoffs going between everything to make sure it stays square.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/4_posts-08ac936450d2b9de9aca1c082c881c74.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>Because of the orientation of the angle, I had to flip the leg mounts upside down to what I originally wanted.  When comparing how the new dimensions lined up with the reference image, it all looked the same.  So this was ok and I left it.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/tee-588e95b4d484d8e4552f70c76fda81a9.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>Working on this with 1 wheel became increasingly annoying as more weight was added higher up.  I would need legs on this if I wanted to easily continue work on it, so I needed to figure out how the legs were going to be made.  I sanity-checked the angle of the legs and this feels correct.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/leg_feel_check-ff11b4c30c05d06d25658e7be59472e6.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>The legs are 1/2" aluminum c-channel that I cut out the center of to have the wheel sit.  This wheel is temporary as I come up with a better aesthetically fitting design, but works for testing functionality and stopping this from falling over.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/first_leg_assem-3688eca34190cc0a917148c4ebeb55c8.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I was on/off sanding and painting the wheel hubs.  I very quickly learned how important and annoying sanding is.  I ended up with something that I felt was good, and I'd be doing this much more over the course of this project and would get better at this.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/early_sanding_wheel-d33d544219533d152f4d0dbdbe797dc5.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/later_sanding_wheel-a92c199c23bad8749ef7f54af45f299d.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>The wheel hub caps have holes for 4-40 screws to thread into, but the wheels do not have holes for this.  I printed a jig so I could drill these holes out in the wheel, I didn't feel like this was worth reprinting the entire wheel for.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/hub_jig-e191a43db5af2d2120e1d03b61c35721.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/wheel_and_hub-cda46f7f70158b3a3cc684a44da6324e.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>An issue on D-O was the gear being press-fitted onto the motor shaft eventually stripped.  I found aluminum hubs on Amazon and decided to make a gear to interface with this. I needed to drill a hole in the body so the set screw was accessible.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/metal_hub-1ff5dd4e9006cde455b293b84bac3c60.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/through_hole_for_set_screw-84efd5f88b6711e502c3bf01535213b0.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>The metal hub was a little larger than the smallest point on my gear so I used my "lathe" (drill + belt sander) to make it smaller.  I checked the diameter frequently with calipers.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/lathe_hub-2a738f880d61881d070b24fc4735d5d0.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/metal_hub_on_gear-6f7c543586555b891c9bc1ff52c89d9c.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/gear_meshing_with_wheel-486ff4f44ac6ebb7ab837d5c355d7f99.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>Thank you to Zach Pinkerton for leaving this review on this <a href="https://a.co/d/1QRSCqb" target="_blank" rel="noopener noreferrer">lazy susan</a>!  I have no idea if this is the best one or not, but the review is enough for me.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/lazy_susan_review-379b287e0c930fd5e45d30f0cdff4e52.png" width="1027" height="646" class="img_ev3q"></p>
<p>I printed mounts for the lazy susan with space for bushings, and printed brackets to hold a screw that the entire lazy susan pivots off of.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/M7PbQq6D48E?si=YfEPyxlpbQgVRYaE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>I made a mount for the servo and cut out a linkage from 1/8" polycarbonate to connect the servo horn to the lazy susan.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Oa7mW7nhXUE?si=9-WQb64j8WYOxDbx" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>To make the head spin I designed a ring gear similar to how the wheels work.  I'll use an N20 motor to make the head spin.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/ring_gear-5a1cf4a0c59fa8796cb16e8d8400fdca.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>I designed a press-fit mount for the motor that has a set screw to hold the motor in place.  This mounts to the part of the lazy susan that is stationary.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/head_spin_motor_mount-ca4d1d116f3a8876001d1d009f72f3bf.png" width="870" height="752" class="img_ev3q"><br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/motor_mount_printed-e018194cc546cbdd135c55da94588f62.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I didn't want to buy more aluminum hubs and I feel the head won't be under an intense amount of force, so I've come up with a strange solution.  Using a VEX shaft collar with a 1/4" screw, I can make geometry in the gear to fit around this.  Then I can clamp the shaft collar to the motor and the gear will clamp around the shaft collar.  This is surprisingly stable, and I imagine this will only work in small scale very low-torque situations like this.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/gear_with_shaft_collar-169d7586f0b59b1c4466355efbf930e6.png" width="786" height="776" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/spin_gear_almost_mounted-ff31e003dc58c34f350c846de1884d26.jpg" width="4032" height="3024" class="img_ev3q"><br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/spin_gear_mounted-44f5199712301241e8984c80aad37082.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I (finally) switched out the painter's tape for "adhesive shim" aka aluminum tape. The bearings now press fit over the shafts.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/aluminum_tape-820f4b7336acba02f35b5aa097ab8890.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I tried to assemble the robot and realized that I cannot assemble the wheels with the hub caps, they block where screws need to go to keep the wheel from falling off the shaft.  I split the design into 2 parts and have the inner part mounted with magnets.  This also makes it significantly easier to get the color split between the two parts.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/possible_wheel_hub_caps-d4a3b86eae56081601ad18705708d570.jpg" width="3024" height="4032" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/black_and_green_hub_caps-26d8c9276f2c9b325e8af7c51dbf505d.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I made this test body to check how the dimensions felt on the actual robot, and I wasn't happy with it.  I felt like everything needed to come down farther.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/first_body-052c42ddbd54dbea5a0fc8da952a37e5.jpg" width="3024" height="4032" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/first_body_annotated-ef07f498a798d8a425579cd8df69abab.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>Something I did get right on this design is the lip underneath the body.  This allows me to figure out what to put there, and it doesn't limit me mechanically to anything while I continue to work on this.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/under_body_cad-b4c8b992607db58e3cbf22cbc8834ab4.png" width="918" height="735" class="img_ev3q"></p>
<p>I added these new dimensions and added pockets for vents and a decorative front plate.  The dimensions for this ended up feeling perfect.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/new_body_cad-7b9d7ff2e72287ac5c8feacaeb506109.png" width="790" height="796" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/new_body-2df46a4137c37a4ca743e462798c832b.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>I tried a new wheel design using a VEX flex wheel but I'm really not happy with it, instead, I'll try using an o-ring.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/3inch_wheel_test-d07f129e30612ae2d3a449804960f19c.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I designed a new wheel that I think looks better and uses an o-ring instead of a VEX flex wheel.  I also made the leg design, but this won't be the final version.  My Prusa Mini is small and I cannot fit this entire leg on the printer.  I'll need to split it up into multiple pieces.  Designing each part of this leg from scratch while trying to figure out how to get it all to fit seems like a nightmare.  So instead I've designed the leg as a single part, and once I'm happy with it I'll pull the dimensions for the separated pieces.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/test_leg_front-b7753b54ae6782dbb2bb9f2958d7719f.png" width="677" height="825" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/test_leg_back-3d58be71ea2c3bfcc049a26fceb5014e.png" width="550" height="797" class="img_ev3q"></p>
<p>I wasn't too happy with the back of the leg, I felt it needed more of the hook shape around the wheel.  Once I added that I was pretty happy with the way it looked.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/test_leg_back_annotated-72dec5c09df5151813d0605426efe6ec.png" width="550" height="797" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/test_leg_back_real-d222b41e667e0d6fa0961bfc5de0dcaf.png" width="734" height="822" class="img_ev3q"></p>
<p>I wanted some mechanical interlocking between the pieces on the leg, so I have these chamfers that make sure these two parts are indexed together.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/interlocking_geometry-4bda25498881859be68e15e5b62e8ced.png" width="1185" height="718" class="img_ev3q"></p>
<p>All of the parts come together like this.  I changed the shape of the top portion of the leg because more space was needed to cover the keps nuts that hold the metal in place.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/final_leg_uncolored_front-2b5e16d9ce75b5db5e1a3470088de5bd.png" width="1037" height="753" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/final_leg_uncolored_back-11eb1645175c4811fe1f5eea20586a07.png" width="1078" height="815" class="img_ev3q"></p>
<p>I decided to have separate parts that are painted a different color that attaches to the leg.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/final_leg_colored-a3a7e6519b06d6e6cea609250e694898.png" width="952" height="755" class="img_ev3q"></p>
<p>The electronics need covering.  I had the idea to make a piece that flexes around the body and clicks into place over the main printed chassis.  This part is printed and ideally will flex around the chassis.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/center_tire_cad-4017191bf25d8d03d6ae944929023d92.png" width="852" height="812" class="img_ev3q"></p>
<p>The center tire idea worked!  The legs are also all coming together and working as I expected.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/robot_center_tire_legs-31d12c1d8881aa0306aaa5411ef9d50f.jpg" width="3024" height="4032" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/leg_side-6702618f3065443f12e7bcf7e51c1706.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>For the head, I want it to be mounted with magnets.  For that, I need the head to index with the lazy susan.  I made 3D printed cones to mount to the lazy susan, and have receiving ends of that on a plate that the head will get mounted to.</p>
<iframe width="315" height="560" src="https://www.youtube.com/embed/GL3CSzSX-kg?si=yHeT-2k5VA5J-A22" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>I started painting the legs while I designed and worked on the head.  The head is a $0.50 bowl that I got from Target.  I wasn't sure if it would work or not, but the dimensions looked about right so I picked it up.  I liked the dimensions so I went ahead with using it.  I also kind of liked the idea of using this wall greens medicine cap as the eye.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/head_and_leg_paint-bcbee7d8b357e043c11c20f0c190f7f1.jpg" width="2737" height="2387" class="img_ev3q"></p>
<p>I CADed the bowl and added some decoration around it.  I have the eye around a ball joint I'm going to 3D print and a cover around the eye.  I also made "eyebrows" that are going to move in and out to give the robot more expression.  I tried adding a top part that is colored, but the robot looks like it has a receding hairline, so I won't be going forward with that.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/receding_hairline-0305a837bffc166b7654267ed9031de0.png" width="1137" height="664" class="img_ev3q"></p>
<p>The eyebrows are connected to a linkage to move them in and out slightly, and the eye has an X and Y servo that will move it in both axes.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/haed_mechanics-d1eda97f8dc7f495069701ef4143bece.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/head_unpainted-c63c330cbed30ee0c901a375569f0b0e.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>To fill the crevis in the bottom of the bowl, I used durhams putty.  This is a very cheap powder, which is ~$3, and the powder gets added to water.  I can control the viscosity of it by changing the ratio of powder to water, and then I can fill in the area with this.  It's very sandable, and does cure to be "rock hard".
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/durhams-25c9953c8c4b3c55ed2504e21adb1e4a.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I got the head primed and painted and got the rest of the structure painted.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/head_painted-231a2df450e51f557467f2f8698f0297.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/head_on_robot-37b71ea89c4286c842e3fcaa56f3f9c8.jpg" width="3024" height="3209" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="electronics">Electronics<a href="https://www.roboticsisez.com/projects/dd-3#electronics" class="hash-link" aria-label="Direct link to Electronics" title="Direct link to Electronics">​</a></h3>
<p>To get serial, power, and ground to the head I'm going to use a slip ring.  The slip ring is mounted in the center of the stationary part of the lazy susan.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/slip_ring-c30b05bc8039084238f7a85dc4350ad6.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I wired everything up and started to get the head to work!  I'm communicating with serial to the Teensy in the head and I'm able to control all of the servos in the head.</p>
<iframe width="315" height="560" src="https://youtube.com/embed/myDEqXWcs1M?si=WTrMGEtHHyj75Lg0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>Eventually after testing some more, the robot stopped responding to anything.  I figured out that I fried the Teensy in the head and the body.  After asking Kiana Dumdumaya why this would happen, we looked through the specs of the Teensy and saw that it only supports 3.3v IO when I'm using 5v IO and downstepping a 4s lipo to 5v for the electronics.  We decided to switch over to an Arduino Nano Every.  I tried to get that working before the event but for some reason, I ended up frying the Arduino in the body too when I was testing.  I didn't want to rush this and waste a bunch of money, so I decided to wait until I could work with Kiana to get all of the electronics working and redo everything with her.  I'd go to the convention with a completed visual robot and incomplete electronics.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="at-long-beach-comic-con-2023">At Long Beach Comic Con 2023<a href="https://www.roboticsisez.com/projects/dd-3#at-long-beach-comic-con-2023" class="hash-link" aria-label="Direct link to At Long Beach Comic Con 2023" title="Direct link to At Long Beach Comic Con 2023">​</a></h3>
<p>I learned an absolute ton at this event.  I felt bad showing up with a robot that didn't work, but the amount of support and advice I received to get this robot working was significantly more than I had anticipated.  I was so focused on talking to everyone that I didn't take as many pictures as I would have liked.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/r2_roxy-5fd41450486b8771a5bd3f3608b5e045.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/little_dude-bdd6f84fbeb395e8431a50bd3c77a9f8.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/group_robot-266b1e3866f116c830d53b95bf6db197.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/roxy_max-03b9e0a4156c5fd9356091a1b2f34c57.jpg" width="3024" height="4032" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="oc-maker-faire-2023">OC Maker Faire 2023<a href="https://www.roboticsisez.com/projects/dd-3#oc-maker-faire-2023" class="hash-link" aria-label="Direct link to OC Maker Faire 2023" title="Direct link to OC Maker Faire 2023">​</a></h2>
<p>Goal: October 21, 2023</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="plans-1">Plans<a href="https://www.roboticsisez.com/projects/dd-3#plans-1" class="hash-link" aria-label="Direct link to Plans" title="Direct link to Plans">​</a></h3>
<p>With everything I learned talking to the other droid builders at Long Beach Comic Con, I decided to sand back paint on every part and redo them. The highest priority for me was to go to the next con with the robot working.  Here's my priority list:</p>
<ul>
<li>redoing the wiring, double check everything, adding speakers</li>
<li>repaint everything</li>
<li>practice traveling with the robot to make sure it works after travel</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="redoing-wiring">Redoing Wiring<a href="https://www.roboticsisez.com/projects/dd-3#redoing-wiring" class="hash-link" aria-label="Direct link to Redoing Wiring" title="Direct link to Redoing Wiring">​</a></h3>
<p>I was pretty tired of breaking things and had help from Kiana Dumdumaya to make sure everything was being done correctly.</p>
<p>The first thing she did was make a Google Sheet with every component and connections between them, which I think is genius and super simple.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/droid_wiring-1d634adefff9f4cb897532f21ac5ae44.png" width="1769" height="736" class="img_ev3q"></p>
<p>Kiana was much more methodical about testing everything than I had been.  I would look up how to connect a component and immediately solder it together, and test as I went.  Kiana made sure everything worked through a breadboard before making any connections and soldering after.  This process made me realize that my frustration with electronics is just my lack of methodology as I have with software and hardware.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/breadboard-76c3d5bafa96d7600def6cff1145c15b.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>An improvement we wanted to make to the wiring was to use SBUS instead of PWM on the receiver.  The receiver has 8 PWM pins, using them means we only have 8 channels from the transmitter to read and 8 pins on the Arduino get used.  SBUS is a serial protocol that can contain all of the channels on the transmitter and would only take UART on the Arduino.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/frsky_receiver-b605f29c7f4160949105edbd29fcd075.png" width="565" height="414" class="img_ev3q"></p>
<p>This required making a serial inverter so the Arduino could read it, but after that, everything worked seamlessly with an <a href="https://github.com/bolderflight/sbus" target="_blank" rel="noopener noreferrer">sbus library</a>.  We found <a href="https://www.ernstc.dk/arduino/sbus.html" target="_blank" rel="noopener noreferrer">this page</a> which had a schematic for a serial inverter for SBUS.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/serial_onverter-f29e11f9b3bc71987653d041ae69e932.jpg" width="582" height="331" class="img_ev3q"></p>
<p>I brought the robot to work to see if everything would work after packing it in the case and traveling with it.  I had a hiccup where my joystick inputs weren't doing anything, but I figured this would have been a problem with the on/off switch as that's the only thing that would stop the joysticks from moving.  I checked and a wire was unplugged from the Arduino, and everything worked after that!</p>
<iframe width="315" height="560" src="https://youtube.com/embed/IsVxDqDYuvk?si=QfPQhgxrZzTwgiFX" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>I wanted to get speakers working for this event, but I couldn't get it to work in time.  The audio quality was terrible from PWM on the Arduino, and there wasn't time to get a better solution.  Audio will have to wait.</p>
<p>I tried getting the communication between body and head Arduino to work, but I had a few problems.  The serial port on my Arduino was now being used for SBUS, and the software serial library made by Arduino wasn't working in my case and was causing the servos to stutter.  Even with that, as I was testing somehow the Arduino in the head shorted, it got extremely hot and wasn't responsive to anything.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="repainting-everything">Repainting Everything<a href="https://www.roboticsisez.com/projects/dd-3#repainting-everything" class="hash-link" aria-label="Direct link to Repainting Everything" title="Direct link to Repainting Everything">​</a></h3>
<p>At Long Beach Comic-Con, I asked the other builders how they finished their 3D prints to not look printed.  The suggestions were to:</p>
<ol>
<li>sand a lot before putting anything on, get rid of layer lines, and make it smooth</li>
<li>use a filler, bondo spot putty, or filler primer</li>
<li>sand the primer back to smooth everything out</li>
<li>check if it needs another layer of primer/bondo and another sanding, repeat as needed</li>
</ol>
<p>We also discussed how green isn't a Star Wars color.  And after I was told the green looked like guacamole, I wasn't feeling it.  So I decided to go to more of a yellow similar to the original reference drawing.</p>
<p>I experimented on a small decorative piece on the leg, and focusing on step 1 to avoid a "garbage in, garbage out" scenario worked amazing.  Green is before, yellow is after.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/green_original-6d711a643fb1f7fb2248da9f12d239c3.jpg" width="3024" height="4032" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/yellow_test-086e24a0f289f17bae398aeb84302121.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>With the amount I was going to be painting, I wanted a better solution to doing everything outside.  I built a ventilated spray paint booth, which I also have a project page on.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/spraypaint_booth-25a9f8cba5d54bd397d1f82d86d2f2c3.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I started this for some of the larger parts to get the worst of it over with, sanding takes forever.  After realizing how important the initial first step is, I paid more attention to it.  After sanding I'd fill holes with bondo and sand it back.  I'd also mix bondo and acetone to get a consistency of thick paint so I could cover large areas.  Doing this meant I needed to repeat the filler primer step much less.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/sanding_more_parts-5c72eb775f93ee0ec905a2d0fa0b3f5b.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>The finish I could get was much better now.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/og_vs_sanded-83447be8d0a84fbe41dc1db2d2784abb.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/post_filler_primer-eb4f32b4d4ece6696045e1807a3c6679.jpg" width="4032" height="3024" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing-and-fixes">Testing and Fixes<a href="https://www.roboticsisez.com/projects/dd-3#testing-and-fixes" class="hash-link" aria-label="Direct link to Testing and Fixes" title="Direct link to Testing and Fixes">​</a></h3>
<p>Because of how overkill the motors are for this project, I needed to implement a slew rate to the drive.  The goal of this is to ramp up the power being sent to the motor.  If I tell the motors to go 30%, they should ramp up to that 30%.</p>
<p>This in itself is pretty simple.  I take the speed that was set to the motor, check if it's bigger or smaller than what we currently have, and add or subtract a constant to that number.  This loop iterates every 10ms and now we have a slew.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#ff63c2;font-style:italic">// Slew the drive motors to avoid changes in motion that are too large</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> l_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">const</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> MAX </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">2</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">drive_set</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> l</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> r</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">drive_switch_enabled</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> r_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token function" style="color:hsl(207, 82%, 66%)">drive_set_raw</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  l_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> l</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  r_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> r</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> max </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fmax</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">r_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> l_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">r_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">r_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> l_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-=</span><span class="token plain"> l_add</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> l_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> l_add</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> r_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-=</span><span class="token plain"> r_add</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> r_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> r_add</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">drive_set_raw</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l_current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r_current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A problem that I noticed after driving with this code is driving in arcs felt wrong.  If I drove in an arc, where the left side would go at 30 power and the right side at 15, both sides would increase at the same rate until the slower side hit 15.  So the robot would drive forward and then turn, even though I never told it to go forward.</p>
<p>I solved this by scaling the slower side down by the ratio of <code>slower side / faster side</code> with this code and everything felt significantly better.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> max </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fmax</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">r_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> min </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fmin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">r_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> l_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">r_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">min </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> max</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">r_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">min </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> max</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r_add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> MAX</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>I wanted to change the sensitivity of the joysticks, so I added the same joystick curve I've been using on my VEX robots which I explain <a href="https://ez-robotics.github.io/EZ-Template/tutorials/joystick_curve" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>But the drive still felt strange.  It can't point turn nicely because it has 4 wheels that don't slide well.  There is some code in FRC called curvature drive which is single-stick arcade but makes the robot feel like a typical RC car.  One axis is forward / backward, and the other axis controls "the angle the front wheels are facing" but in code.  With the implementation I'm using I can't point turn anymore, but I couldn't before anyway so that doesn't bother me.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Curvature Drive from</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// https://github.com/OkapiLib/OkapiLib/blob/54995fd390aaf4d4949a516a76580c50b394912f/src/api/chassis/model/skidSteerModel.cpp#L140-L169</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> scale </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> max_speed</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> forward </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">joystick_curve_fwd</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">joystick_channel</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">LEFT_Y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> curve_fwd</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">127.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> curve </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">joystick_curve_turn</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">joystick_channel</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">LEFT_X</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> curve_turn</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">127.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> left_speed </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> forward </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">forward</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> curve</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> right_speed </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> forward </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">forward</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> curve</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// normalizes output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> faster_side </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fmax</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">left_speed</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">right_speed</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">faster_side </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    left_speed </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/=</span><span class="token plain"> faster_side</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    right_speed </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/=</span><span class="token plain"> faster_side</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  left_speed </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> left_speed </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> scale</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  right_speed </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> right_speed </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> scale</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There is a seam between both halves of the body and this always bothered me.  I was going to try to make a strip that goes up along the seam so it's covered by something that looks like an intentional vertical line.</p>
<p>Kiana suggested instead of that to just have something that wraps around the body and squeezes it all together.  I was skeptical because of the strange geometry of that part of the body, but after she drew this image I felt like it was worth it.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/drawn_seam_fixer-26e7de61b2e5be1431a3f8d50c83e7b1.png" width="1158" height="872" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/real_seam_fixer-a1dd77ab1f7920d0dc374a5b95e1f284.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>I finished up the pelican case and added spots for the batteries and the controller.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/bottom_case-598c1d47ea1b8839fa8465f91c346298.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/middle_case-ac954f83eaff4605906a9a38d49f00e3.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/top_case-29f0057f58fe54de3ffea9a058a5b063.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I wanted to bring it to work again to make sure everything was still working, and good thing I did.  I was having a strange issue where the switch wasn't working again, but this time everything seemed like it was plugged in.  At this point there had been 2 problems with the switch, so after work, I reprogrammed the switch to be on the controller instead.  I brought it back to work the next day and everything was working perfectly. I added safety so that when the switch goes from disabled to enabled, nothing turns on for 3 seconds.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="at-oc-maker-faire-2023">At OC Maker Faire 2023<a href="https://www.roboticsisez.com/projects/dd-3#at-oc-maker-faire-2023" class="hash-link" aria-label="Direct link to At OC Maker Faire 2023" title="Direct link to At OC Maker Faire 2023">​</a></h3>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/dd_walter-b2078b35e25271fc31097ac379c3c028.jpg" width="3024" height="4032" class="img_ev3q"></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/QHBAFHdF71U?si=WKsknEyCu6PMA-Uy" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/r2_bully-6d64903d4b18d4e95010b23ea80c029d.jpg" width="3024" height="4032" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="la-comic-con-2023">LA Comic Con 2023<a href="https://www.roboticsisez.com/projects/dd-3#la-comic-con-2023" class="hash-link" aria-label="Direct link to LA Comic Con 2023" title="Direct link to LA Comic Con 2023">​</a></h2>
<p>Goal: December 2-3, 2023</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="plans-2">Plans<a href="https://www.roboticsisez.com/projects/dd-3#plans-2" class="hash-link" aria-label="Direct link to Plans" title="Direct link to Plans">​</a></h3>
<p>There is a lot I'd like to change to the robot, but I can only give it so much time.  This is the priority list for changes I'd like to make, and we'll get to as many as we can:</p>
<ul>
<li>use gyros in the controller to decide when the controller is set down and disable the robot if it's set down for too long</li>
<li>fix the anything that broke after it drove off of a table</li>
<li>wire the head servos to the body</li>
<li>stop controller "activity warning" and brushless ESC's beeping when left alone for too long</li>
<li>redo the entire head tilt for a delta linkage</li>
<li>change ring gear for a wheel that's sprung into a track for longevity when kids try to spin the head</li>
<li>speakers</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="controller-afk-shutoff">Controller AFK Shutoff<a href="https://www.roboticsisez.com/projects/dd-3#controller-afk-shutoff" class="hash-link" aria-label="Direct link to Controller AFK Shutoff" title="Direct link to Controller AFK Shutoff">​</a></h3>
<p>I want the robot to turn itself off when I set the controller down, but only sometimes.  When the eye/eyebrows are fully done, I'd like to be able to leave the robot on and let everything animate on its own.</p>
<p>There is a switch on the controller to disable all head movement, and there's a switch on the controller to disable the drive.  If the drive is left on I want the robot to disable when I set the controller down.  But if the drive is off, nothing should turn off when I set the controller down.</p>
<p>I don't want the robot to turn off while I'm using the joysticks, even if the robot is completely still.  Currently, I only check if the joysticks have been used recently and allow this function to run when they haven't, but I need to add every input on the controller to that list.  So only after no input has been touched for X amount of time will we start checking for the controller being set down.</p>
<p>Then we check the position over time (velocity) of the controller to see if it's sitting.  If it is, a timer starts, and after that amount of time has passed the robot will shut off.</p>
<p>This needs a little less sensitivity to moving.  Currently, if the controller is on a table and someone walks nearby the controller thinks it's moving.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Disable drive if the controller is set down for a certain amount of time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">controller_switch_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&amp;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">!</span><span class="token function" style="color:hsl(207, 82%, 66%)">are_joysticks_running</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Current values</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> cur_x </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">joystick_channel</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">GYRO_X</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> cur_y </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">joystick_channel</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">GYRO_Y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Figure out the velocity of the controller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> x </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> cur_x </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> last_x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> y </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> cur_y </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> last_y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    last_x </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> cur_x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    last_y </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> cur_y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// If X and Y velocity are 0, and either X or Y isn't currently at 0 degrees, start the timer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">x </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&amp;&amp;</span><span class="token plain"> y </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">cur_x </span><span class="token operator" style="color:hsl(207, 82%, 66%)">!=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">||</span><span class="token plain"> cur_y </span><span class="token operator" style="color:hsl(207, 82%, 66%)">!=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      afk_timer </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">20</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      afk_timer </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    afk_timer </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Once the timer has reached 2000, disable everything on the robot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">afk_timer </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">2000</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    controller_switch_timer </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(29, 54%, 61%)">false</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    startup_switch_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(29, 54%, 61%)">false</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    last_switch_state </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(29, 54%, 61%)">true</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    controller_switch_timer </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    afk_timer </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>I did this by adding a buffer to the velocity to the code above, where if it's less then 1 it'll treat it like 0.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Give wiggle room for noise</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    x </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">abs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">?</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    y </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">abs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">?</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The data from the gyro seemed noisy when I would move quickly still, so I added an SMA filter to the gyro readings.  This was extremely sensitive before, and now all works as I expect it to.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// SMA filter for the gyros in the controller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">gyro_x_vector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">size</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;=</span><span class="token plain"> gyro_x_vector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">max_size</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    gyro_x_vector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">remove</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">gyro_y_vector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">size</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;=</span><span class="token plain"> gyro_y_vector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">max_size</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    gyro_y_vector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">remove</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  gyro_x_vector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">push_back</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">joystick_channel_raw</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">GYRO_X</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  gyro_y_vector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">push_back</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">joystick_channel_raw</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">GYRO_Y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// int xx = 0, yy = 0;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> max </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> gyro_x_vector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">size</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"> i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> max</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"> i</span><span class="token operator" style="color:hsl(207, 82%, 66%)">++</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    gyro_x_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> gyro_x_vector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    gyro_y_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> gyro_y_vector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  gyro_x_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/=</span><span class="token plain"> max</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  gyro_y_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/=</span><span class="token plain"> max</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixing-the-fall">Fixing the Fall<a href="https://www.roboticsisez.com/projects/dd-3#fixing-the-fall" class="hash-link" aria-label="Direct link to Fixing the Fall" title="Direct link to Fixing the Fall">​</a></h3>
<p>First, everything comes apart...
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/PXL_20231122_210748901-847144cb787d731312a51eeb2ab3fb29.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>All of the damage went to the head.  A lot of mechanical parts that were hot glued on have fallen off, and some paint is chipped all around the eye.</p>
<p>I'm starting by hot-gluing everything back into place.  It's a pretty gross process, it isn't leading to consistency between both eyebrows which are meant to be the same.  The eye is a mess too- I saw another builder use springs instead of wire so nothing breaks when it's hit, and that's something I'd like to use.</p>
<p>After fixing everything mechanically it's shown me how unhappy I am with the construction of the head.  After this event, I need to find a better solution to my problems with it.  Maybe it's 3D printing a new head, or it's just making entire subsystems that are printed and get hot glued in, instead of relying on hot glue to index everything inside the head. Who could have guessed that would be inconsistent?</p>
<p>Some paint scratched too.  I have two options for repairing scratches, I can either repaint it and continuously try to keep it perfect, or I can repair it and over time this will gain natural weathering.  I'm going to fix it over time.  The front yellow plate fell off during the fall and the eye took a big scratch, exposing bondo spot putty that was used to fill some gaps.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/eye_before-2ad168f5c521873581c4f44c764db938.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>The color isn't an exact match, but it's hard to tell that my black acrylic paint was more matte than the rest of the head because the yellow part acts as a barrier.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/eye_after-fd7a06547aac2e7092c77aa9909fafb0.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>The body cracked a little at some weaker points in the design.  There isn't much scratched on the body though.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/boyd_before-f5c59ed49680012a5be1a37b7c7b13a5.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I filled the parts that did scratch with some yellow paint and filled the vent with a lighter gray on the inside and gold around.  I like the idea of yellow exposing itself when the black scratches.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/body_after-9378da8abbdc4cbd8d0afd1ff2aab7f3.jpg" width="4032" height="3024" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wiring-head-servos-to-the-body">Wiring Head Servos to the Body<a href="https://www.roboticsisez.com/projects/dd-3#wiring-head-servos-to-the-body" class="hash-link" aria-label="Direct link to Wiring Head Servos to the Body" title="Direct link to Wiring Head Servos to the Body">​</a></h3>
<p>I tried to find a place to plug the servos into the servo board but the pins on the servo board are completely inaccessible.  The opposite side of the blue board needs to be reached.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/PXL_20231122_222634312-31b5894ee099de9ee2e1befd4351f9e4.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>Where this looks from the other side.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/PXL_20231122_222628747-b5d92e00a686e631ed88f0c0f0567c3f.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>The only solution I could come up with was to remove the servo board, desolder some pins, and flip them to the other side, which worked out.  Now to add wires the polycarbonate just has to be removed.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/flipped_pins-109ab6112c9b82ce987f3c187b90f9ee.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>Then it's just wiring everything together and labeling all the wires.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/head_wired-2822ab3579660126f215a0253311f38b.jpg" width="3024" height="4032" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="at-la-comic-con-2023">At LA Comic Con 2023<a href="https://www.roboticsisez.com/projects/dd-3#at-la-comic-con-2023" class="hash-link" aria-label="Direct link to At LA Comic Con 2023" title="Direct link to At LA Comic Con 2023">​</a></h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/BFHmbZconYs?si=m7Rbp61tfYlYZbbu" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/dd-3-3d5ee057c88fb0f44f879ff0842602b8.jpg" width="1080" height="1080" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/group_photo-1a1fe7da11cd6c5dfc160320c047c84c.jpg" width="4032" height="3024" class="img_ev3q"><br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/bob_gurr-0c7f1f0bae9233faa9c385af2681b3e7.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/roxy-b0288a29bafabeebe3ac558de2bb37e0.jpg" width="3024" height="4032" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/dd_and_grogu-08627e0ce27f966606d376944e263f5d.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/walle_out-d4317b7456dde3bb50fc0bc6436b74f9.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/gil_and_grogu-05f650b689c1bef360d1d3ef38874883.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/gross_grogu_dd-bcd92005b62356aff2e36bfb9917d971.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/trooper_dd-290e62961bd752d7a3174741b522236b.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/rusty-92b403eb72e703a397c570099fbe2c6e.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/dd_gil_grogu-fa8ebcc18af76522b73ce881566a29fe.jpg" width="4032" height="3024" class="img_ev3q"></p>]]></content:encoded>
            <category>hardware</category>
            <category>software</category>
            <category>cad</category>
            <category>electrical</category>
            <category>star wars</category>
            <category>wip</category>
        </item>
        <item>
            <title><![CDATA[Adaptive PID]]></title>
            <link>https://www.roboticsisez.com/projects/adaptive-pid</link>
            <guid>https://www.roboticsisez.com/projects/adaptive-pid</guid>
            <pubDate>Wed, 22 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Adaptive PID is a modification of PID that scales constants based on the robot's tested velocity curve.]]></description>
            <content:encoded><![CDATA[<p>Adaptive PID is a modification of PID that scales constants based on the robot's tested velocity curve.</p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-c4b8f2f09fc56838b3a2dd09793f2f91.png" width="696" height="428" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="about">About<a href="https://www.roboticsisez.com/projects/adaptive-pid#about" class="hash-link" aria-label="Direct link to About" title="Direct link to About">​</a></h2>
<p>When a robot is moving it generates momentum.  PID is extremely consistent when the momentum of the system is constant.</p>
<p>When tuning constants for moving, I always notice that after ~2' of movement the robot is extremely consistent.  In the closer distances, the constants aren't quite right, because the momentum is different from when it's going full speed.  This is an even larger problem with turns, as the robot never reaches a constant momentum.</p>
<p>A solution I want to avoid is tuning PID constants for multiple turn amounts and interpolating between them.  I haven't tested this, but I'm extremely confident this would be the best solution.  I do not like how much time this takes to set up and tune for each new robot.  My goal is to find a lazier solution that gets almost all of the way there.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ez-templates-implemented-solution">EZ-Templates Implemented Solution<a href="https://www.roboticsisez.com/projects/adaptive-pid#ez-templates-implemented-solution" class="hash-link" aria-label="Direct link to EZ-Templates Implemented Solution" title="Direct link to EZ-Templates Implemented Solution">​</a></h2>
<p>I had this problem when I was a competitor, and my solution was to:</p>
<ul>
<li>not run turns as fast as I could, at ~70% power</li>
<li>slow down the robot within some band of the target</li>
</ul>
<p>This allowed me to have 1 tuned constant and the robot would slow down early for larger movements making everything more similar than without this.  It isn't a perfect solution though, it has all of the same problems as not having it but less.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="detecting-when-speed-drops">Detecting When Speed Drops<a href="https://www.roboticsisez.com/projects/adaptive-pid#detecting-when-speed-drops" class="hash-link" aria-label="Direct link to Detecting When Speed Drops" title="Direct link to Detecting When Speed Drops">​</a></h2>
<p>The first thing I tried was to find 2 parameters: what was the max power being sent to the motors and for how long?  I'd keep track of all of this during the turn, and when the power started to go down I recognized that as my stopping point.  Now I have these two numbers and I use them to modify all of my PID constants.</p>
<p>This would sometimes look promising but overall it felt like I needed to tune how much pull/push the two parameters gave to the PID constants for different distances, which defeats the purpose of what I'm trying to do.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">time_full_speed</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">default_constants</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  pros</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token function" style="color:hsl(207, 82%, 66%)">delay</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">50</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> time_passed </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">50</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token plain">vector</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> last_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">drive_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token plain">vector</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> all_powers</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">while</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token boolean" style="color:hsl(29, 54%, 61%)">true</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    pros</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token function" style="color:hsl(207, 82%, 66%)">delay</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">ez</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token plain">util</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token plain">DELAY_TIME</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    time_passed </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> ez</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token plain">util</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token plain">DELAY_TIME</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token function" style="color:hsl(207, 82%, 66%)">printf</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">"%i:   %i != %i\n"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> time_passed</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">drive_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> last_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> error </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">abs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">drive_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">abs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">last_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    all_powers</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">push_back</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">abs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">drive_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">error </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      i</span><span class="token operator" style="color:hsl(207, 82%, 66%)">++</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">3</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token function" style="color:hsl(207, 82%, 66%)">printf</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">"%i\n\n\n"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> time_passed</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">break</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    last_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">drive_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> average_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token keyword" style="color:hsl(286, 60%, 67%)">auto</span><span class="token plain"> i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> all_powers</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    average_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  average_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/=</span><span class="token plain"> all_powers</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">size</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> time_conversion </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">360.0</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain">time_passed</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> speed_conversion </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">80.0</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> average_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">auto</span><span class="token plain"> consts </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_turn_constants_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> conversion </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">time_conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">speed_conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> max </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1.75</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// conversion = conversion &gt; max ? max : conversion;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  conversion </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> conversion </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">?</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// consts.kp = consts.kp * conversion;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// consts.kd = consts.kd * conversion;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">start_i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">start_i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">turnPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">integral </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_turn_min_set</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_turn_min_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">conversion </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// chassis.pid_speed_max_set(chassis.pid_speed_max_get() / conversion);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_turn_constants_set</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kp</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">ki</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kd</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">start_i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">printf</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">"Time Passed: %i  Last Power: %i Average Power: %.2f    \nTime Conversion: %.2f  Speed Conversion: %.2f  Conversion: %.2f   \nkP: %.2f  kD: %.2f  start i: %.0f  min: %i  max: %i\n"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> time_passed</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> last_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> average_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> time_conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> speed_conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kp</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kd</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">start_i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_turn_min_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_speed_max_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">turning_test</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_turn_set</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">90</span><span class="token plain">_deg</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> TURN_SPEED</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">time_full_speed</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_wait</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="moving-target-with-motion-profiling">Moving Target with Motion Profiling<a href="https://www.roboticsisez.com/projects/adaptive-pid#moving-target-with-motion-profiling" class="hash-link" aria-label="Direct link to Moving Target with Motion Profiling" title="Direct link to Moving Target with Motion Profiling">​</a></h2>
<p>I took the motion profile test I made for Captain R3X and implemented it here.  This works in the same way it would with a servo, where it sets new target positions for the PID to reach and the rate of change of new targets is being controlled.  This seemed promising, but because I'm not controlling velocity this wasn't working too well.  The robot would move nicely until the end of the motion where the robot would reach its target and stop, then go to the next target, etc.  The robot was stuttering through the end of the motion.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="acceleration-test">Acceleration Test<a href="https://www.roboticsisez.com/projects/adaptive-pid#acceleration-test" class="hash-link" aria-label="Direct link to Acceleration Test" title="Direct link to Acceleration Test">​</a></h2>
<p>I keep thinking back to <a href="https://www.vexforum.com/t/24cs-motor-control-value-remapping/23959/1" target="_blank" rel="noopener noreferrer">TrueSpeed</a>, a fix for VEX's motor controllers that weren't linear.  The values were remapped and normalized giving a linear output through a LUT (look-up table).</p>
<p>I tried something similar.  I told the robot to go at some speed and read the rate of change of the IMU.  After some target degree was passed I stopped reading velocity.  This was done for 17 different target values, running each test 6 times, 3 left and 3 right.</p>
<p>All of that gave me this graph.  The x-axis is the target we were reading to, and the y-axis is the average velocity in the time it took to get there.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-c4b8f2f09fc56838b3a2dd09793f2f91.png" width="696" height="428" class="img_ev3q"></p>
<p>To use this graph I scaled the Y axis down to 1 by dividing everything by the largest tested Y point.  That left me with many points I can draw lines through and find new conversion rates for untested turn amounts.  I took my conversion rate and I changed my constants by that.  And... it worked!</p>
<p>In this test, the first set of turns is the standard EZ-Template.  The second set of turns is using the modified constants.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/qdRAPPe5oj8?si=n4ZuJxHNptZo0IWk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token plain">vector</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token plain">vector</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;&gt;</span><span class="token plain"> scaling </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">2.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.09400453473</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">7.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.2022555992</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">12.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.2646745481</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">17.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.3548182873</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">22.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.3951412327</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">27.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.4499251424</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">42.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.5630226236</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">57.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.6381967848</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">72.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.6967510482</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">87.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.7629670943</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">102.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.7982267571</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">117.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.8649159207</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">132.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.8999937274</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">147.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.9429511551</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">162.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.976136005</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">177.5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">get_scale</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Find a point that is larger than then target</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> initial_error </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">turnPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">target_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  initial_error </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">initial_error</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token keyword" style="color:hsl(286, 60%, 67%)">auto</span><span class="token plain"> j </span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> scaling</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">j</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">initial_error</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">break</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    i</span><span class="token operator" style="color:hsl(207, 82%, 66%)">++</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// If target is equal to or larger than our largest tested point, return 1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> scaling</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">size</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// If target is equal to or smaller than our smallest tested point, return the smallest conversion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">initial_error </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> scaling</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token plain"> scaling</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Draw lines between each point</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> m </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">scaling</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> scaling</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">scaling</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> scaling</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// (y2-y1) / (x2-x1)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> b </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> scaling</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">m </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> scaling</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain">                                        </span><span class="token comment" style="color:#ff63c2;font-style:italic">// b = y - mx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> y </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">m </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> initial_error</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain">                                                    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// y = mx + b</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token plain"> y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> smooth</span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token function" style="color:hsl(207, 82%, 66%)">turn</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">okapi</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token plain">QAngle p_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> speed</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">default_constants</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> conversion </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">get_scale</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">p_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">convert</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">okapi</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token plain">degree</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">auto</span><span class="token plain"> consts </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_turn_constants_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kp </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kp </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kd </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kd </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">ki </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">ki </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">start_i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">start_i </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_turn_constants_set</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kp</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">ki</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kd</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">start_i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">printf</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">"\nConversion: %.2f   kP: %.2f  kD: %.2f  start i: %.0f  min: %i  max: %i\n"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> conversion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kp</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">kd</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> consts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">start_i</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_turn_min_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_speed_max_get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_turn_set</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">p_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> speed</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the tests for the data that was collected, the speed that the robot was going at is constant.  A potential improvement is to allow multiple tests with multiple speeds and make a 3D graph to find new scaling values.  At some point, this defeats the purpose of being easier than the alternative though.</p>]]></content:encoded>
            <category>software</category>
            <category>vex</category>
            <category>wip</category>
        </item>
        <item>
            <title><![CDATA[Spraypaint Booth]]></title>
            <link>https://www.roboticsisez.com/projects/spraypaint-booth</link>
            <guid>https://www.roboticsisez.com/projects/spraypaint-booth</guid>
            <pubDate>Mon, 23 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[I built a ventilated box to spray paint indoors.]]></description>
            <content:encoded><![CDATA[<p>I built a ventilated box to spray paint indoors.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-ec88c610b7c60d9830813ee15ce9bd2a.png" width="971" height="776" class="img_ev3q"></p>
<hr>
<p>For DD-3 I was spray painting so much that I needed a better solution for it.  I saw online that people had little booths to spray paint and airbrush in.  I looked to buy one and they were ~$70 for the cheapest one I could find and it was tiny, and larger ones couldn't fold up for storage.  I decided to make my own.</p>
<p>I had some aluminum 1/2" angle and decided that I'd build it all out of that.  I want to comfortably fit an R2 dome inside, so this needs to be at least 18".  I like having more room on the bottom for laying out parts, and after playing with some lengths on my workbench I decided on 30" wide and 24" deep.  Deciding height was trickier, the fan is more effective the smaller the volume of the box is.  Ultimately I decided the back top edge wasn't going to be useful space, so the back of the box was going to be 18" and the front 26".<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/side24-98e1744f28d14c3b18b14b9eae6b16de.png" width="776" height="761" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/side18-d2f28c7c34362118b64668cb0bead050.png" width="751" height="732" class="img_ev3q"></p>
<p>I designed 3D-printed brackets to connect all of the angles.  The small back rectangle is being treated as the main box, and everything is pivoting around that for fold-up.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/no-support-c89729ae1d7ffa4e9c7ca1db3624951a.png" width="996" height="768" class="img_ev3q"></p>
<p>I added diagonals to stop everything from collapsing, and that's the design done.  The back rectangle has enough space for a fan and filter to be added, I will figure that out when I get there.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-ec88c610b7c60d9830813ee15ce9bd2a.png" width="971" height="776" class="img_ev3q"></p>
<p>Assembly all worked out like in CAD.  For the fan, I'm using the cheapest bathroom exhaust fan Home Depot had, rated for 50 cubic feet per minute which is much larger than the volume of this booth. An air filter gets press-fit over that, and the exhaust fan goes directly out my window.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/first_assemble-70bc75806113f8a50b60b18fc65bef8b.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>To fill in the sides I was originally going to use cardboard, but I wanted a replaceable surface on the inside so when it got gross with paint I could have a fresh surface.  I tried forgoing the cardboard entirely and just gift-wrapping the box in thin plastic, which was functional but looked awful and was harder to replace than if I had cardboard.  With cardboard walls, I can just tape the plastic over the inside.  To replace this, I have to remove the booth from my desk and roll it around in plastic.  It also looks bad.  But this is a tool for me to complete another project, so I will fix that another day.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/gift_wrapped-733151ae90c6cc0d7d24982e5bf0f67a.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>The lighting inside the box was horrible, so I got a small garage light and mounted it to the front.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/garage_light-b05d40bd8ce26b4e6c23af424cd4dc99.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>My next steps are to:</p>
<ul>
<li>add cardboard walls</li>
<li>add an on/off switch for the exhaust</li>
<li>wire the light and exhaust to a single cable</li>
</ul>]]></content:encoded>
            <category>hardware</category>
            <category>cad</category>
            <category>electrical</category>
            <category>wip</category>
        </item>
        <item>
            <title><![CDATA[French Cleats]]></title>
            <link>https://www.roboticsisez.com/projects/french-cleats</link>
            <guid>https://www.roboticsisez.com/projects/french-cleats</guid>
            <pubDate>Wed, 05 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[I designed and built French cleats for storing tools on my wall.]]></description>
            <content:encoded><![CDATA[<p>I designed and built French cleats for storing tools on my wall.</p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-a618ffc6c83d98dd4b57d7ec0c337734.jpg" width="4032" height="3024" class="img_ev3q"></p>
<hr>
<p>It was becoming impossible to work on any project without my working surfaces covered in tools.  The tools have homes, but they are in drawers or not close to where I'm working.  I need a 1 step solution to store things I use often, and I'm going to use my wall for that.</p>
<p>I don't think pegboards look very good (and are strangely expensive), and currently I sleep in the room I make things in so that matters to me.  I discovered what French cleats were through <a href="https://youtu.be/KIqs4zIovTk?si=GSH6dp7U7DM5r2E4&amp;t=178" target="_blank" rel="noopener noreferrer">Hank Green</a> in his office tour.  I remembered seeing them somewhere else and found it's a common enough workshop storage solution.  I found options for things complete systems I could buy but they were all so expensive.  I priced everything out to be significantly cheaper through McMaster, and even cheaper when I went to pick it up instead of paying for shipping.</p>
<p>Instead of machining a 45-degree angle into metal which I don't have the tools for, I decided on leaving a gap between the wall and a piece of metal.  There will be a piece of plastic between them.  This lets me have a matching shape on something I mount to the wall.<br>
<img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQsAAAJ8CAYAAADpmoS2AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAftSURBVHhe7dhBioNAEEBRa+5/Z0ehIQw44W+SCHlvk1pqRz5NzX7Y+GNm1vTgmPh2P+sX4CmxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxABKxAJLZD2tmmZk1PXzqmK6e5d18IpzcLIBELIBELIBELIDEgvPC3Recr3yWO7079+JmASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASRiASSzH9bMMjNruqdX/mVX7+4T4eRmASRiASRiASRiASQWnBeeLTjfeVz/PYcFJ5/gZgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEkYgEksx/WzDIza+LkE+HkZgEkYgEkYgEkYgEkFpwXrhacjolv52YBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBJGIBBNv2Cy98R9b1SEtAAAAADmVYSWZNTQAqAAAACAAAAAAAAADSU5MAAAAASUVORK5CYII=" width="267" height="636" class="img_ev3q"></p>
<p>I mounted the plastic and aluminum to my wall after making sure I was hitting studs and everything was level, and started work on a drill mount. I have a piece of plastic going inside the gap between the aluminum and my wall, and I'm using 1/2" angle to make the holder for the drill.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/drill_started-0ffb1cbb0a8e1b8c47d0277a3c84bc27.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I free-handed the design and hole placement but it came out working nicely.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/drill_done-f8a54f5f8ab05b361f283d4320809de4.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I designed caliper holders and a mount for a paper towel holder.  (yes the tape isn't level, my marker lines are level though)
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/caliper-9f3a1afd0ed6de3a9338a0c19566ff26.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>It's a lot of work to design a custom holder for everything I want on the wall.  Of course, some things will need to be custom, but in general, I'd like to try to use some generic hook design.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/big_hook_cad-cbc16624b2620fe6bdb4554ce7015bd9.png" width="654" height="722" class="img_ev3q"></p>
<p>With this as a base, it's much easier to add modifications to it.  This is much nicer than making a custom holder for every part.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/hot_glue_gun_holder-cfc52af6758fb0e05c0d00adef11909e.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/ipa-e5a48a2d500ab36929b17a95466cd691.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I took my drill bit case took out each section, and made simple brackets for them to go on the wall with.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/drill_index-c1e433e8bf432a519197b52c78efd5b8.png" width="1500" height="1500" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/drill_index_wall-67dca42ad7aeb1254546411000162c89.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I tried to make a hexagonal little crate to hold markers and maybe pens but it ended up looking really ugly because of the amount of wasted space.  I changed the design for a strip of poly spaced out from the wall acting like a belt and this works and looks much better.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/marker1-710414db3fb8838172628a5a8baed5a0.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/marker2-da5e91a17ed2717f384557e12458dda3.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I mounted more aluminum to my wall near my workbench and have homes for tools I use often there.  I bought a Milwaukee screwdriver holder for their pack-out system, but just drilled holes in it and mounted a bit of aluminum to go around the French cleat.  I used one of the generic hooks to hold pliers and snips.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/workbench1-c2e23947a8e8c9a7361595e36d58b2a9.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>Next, I need to find homes for:</p>
<ul>
<li>sandpaper</li>
<li>spray paint</li>
<li>Bondo</li>
<li>tape</li>
<li>spray paint</li>
<li>dremel and dremel bits</li>
<li>dykem</li>
</ul>]]></content:encoded>
            <category>hardware</category>
            <category>cad</category>
            <category>wip</category>
        </item>
        <item>
            <title><![CDATA[EZ-Template]]></title>
            <link>https://www.roboticsisez.com/projects/about-ez-template</link>
            <guid>https://www.roboticsisez.com/projects/about-ez-template</guid>
            <pubDate>Thu, 30 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[EZ-Template is a simple plug-and-play PROS template that handles drive-base functions for VEX robots.]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/EZ-Robotics/EZ-Template" target="_blank" rel="noopener noreferrer">EZ-Template</a> is a simple plug-and-play PROS template that handles drive-base functions for VEX robots.</p>
<p><a href="https://github.com/EZ-Robotics/EZ-Template" target="_blank" rel="noopener noreferrer">https://github.com/EZ-Robotics/EZ-Template</a></p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-e26bfae36f0ddadd217b35ff5add7727.jpg" width="4032" height="3024" class="img_ev3q"></p>
<hr>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>EZ-Template has its own website for documentation <a href="https://ez-robotics.github.io/EZ-Template/" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="about">About<a href="https://www.roboticsisez.com/projects/about-ez-template#about" class="hash-link" aria-label="Direct link to About" title="Direct link to About">​</a></h2>
<p>Many students using VEXcode rely on the built-in Drivetrain class, but it often falls short in addressing the nuances of creating consistent autonomous routines, leading to frustration for new programmers. Issues like wheel slop and mechanical obstructions can be challenging to diagnose, causing students to lose interest in robotics.</p>
<p>EZ-Template solves these problems by giving simple code that has been tested to work.  If something goes wrong, a student can try to tune the PID after fixing mechanical problems (which you can't do in VEXcode).  It eliminates one point of failure to keep students more interested in robotics.</p>
<p>This project taught me the importance of listening to user feedback and making adjustments accordingly.  I got feedback that users would prefer instructions in the code rather than figure it out from scratch in the docs, so I made sure every version was released with functions used in an example project.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="v1x"><a href="https://github.com/EZ-Robotics/EZ-Template/tree/f4c287dc3cea8c95cdbbd47939ef41c1d5a2f749" target="_blank" rel="noopener noreferrer">v1.x</a><a href="https://www.roboticsisez.com/projects/about-ez-template#v1x" class="hash-link" aria-label="Direct link to v1x" title="Direct link to v1x">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="about-1">About<a href="https://www.roboticsisez.com/projects/about-ez-template#about-1" class="hash-link" aria-label="Direct link to About" title="Direct link to About">​</a></h3>
<p>The goal of EZ-Template shifted over time. This started out as my <a href="https://github.com/EZ-Robotics/EZ-GOOFY" target="_blank" rel="noopener noreferrer">codebase on my Tower Takeover robot</a>, and as I progressed through Change Up I got increasingly annoyed at how convoluted it was to give the code all the information it needed.  I made a brand new project and copied over all of my drive base code, and had a <a href="https://github.com/EZ-Robotics/EZ-Template/blob/f4c287dc3cea8c95cdbbd47939ef41c1d5a2f749/include/EZ-Template/setup.hpp" target="_blank" rel="noopener noreferrer">single configuration file</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="features">Features<a href="https://www.roboticsisez.com/projects/about-ez-template#features" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>simple to set up a project</li>
<li>drive, turn, and swing turn PID</li>
<li>speed ramp-up for driving</li>
<li>asynchronous PID with blocking functions until settled and until a specific position has come</li>
<li>joystick input curves</li>
<li>live adjustment of the curves through the controller</li>
<li>basic autonomous selector</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="issues">Issues<a href="https://www.roboticsisez.com/projects/about-ez-template#issues" class="hash-link" aria-label="Direct link to Issues" title="Direct link to Issues">​</a></h3>
<p>The code for this version was less than ideal.  The <a href="https://github.com/EZ-Robotics/EZ-Template/blob/f4c287dc3cea8c95cdbbd47939ef41c1d5a2f749/src/EZ-Template/auton_drive_functions.cpp" target="_blank" rel="noopener noreferrer">main file was ~500 lines</a>, with no real structure to anything.  The code worked, and because this was originally intended for only me to use I felt this was fine.  As more people used it, more errors were caught and it was clunky for users to update the library.</p>
<p>The code needed to be cleaned and it had to be easier for users to update the library.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="v2x"><a href="https://github.com/EZ-Robotics/EZ-Template/tree/c4a5fd048f90363cc3f841abcb05c95eec2d36c3" target="_blank" rel="noopener noreferrer">v2.x</a><a href="https://www.roboticsisez.com/projects/about-ez-template#v2x" class="hash-link" aria-label="Direct link to v2x" title="Direct link to v2x">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="about-2">About<a href="https://www.roboticsisez.com/projects/about-ez-template#about-2" class="hash-link" aria-label="Direct link to About" title="Direct link to About">​</a></h3>
<p>This was a complete rewrite of EZ-Template taking advantage of <a href="https://pros.cs.purdue.edu/v5/cli/conductor.html" target="_blank" rel="noopener noreferrer">PROS templates</a>, done with the help of a group of students.  Setup was now done in a constructor and an example project comes loaded with comments and autonomous routines for users to test and play with how the library works.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-1">Features<a href="https://www.roboticsisez.com/projects/about-ez-template#features-1" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>SD card saving</li>
<li>"tug of war" detection in autonomous</li>
<li>PID exits for when drive motors overheat</li>
<li>right stick arcade</li>
<li>loading animation during IMU calibration</li>
<li>3 wire / smart encoder encoder support</li>
<li>add/remove motors from the drive dynamically if a team uses a PTO</li>
<li>exposed PID class</li>
<li>classed away autonomous selector that is easier to use</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="issues-1">Issues<a href="https://www.roboticsisez.com/projects/about-ez-template#issues-1" class="hash-link" aria-label="Direct link to Issues" title="Direct link to Issues">​</a></h3>
<p>My biggest problem with v1.x and v2.x of EZ-Template is they are <em>too</em> easy.  EZ-Template comes with PID and exit condition constants that I tuned for some of my robots.  They were working pretty well within my similar robots, but I assumed everyone would have to tune their own PID because of variances in their robots to mine.  Over the course of a few seasons, this assumption has been proven very wrong.  The average team has to do little to no tuning to get consistent results, and that isn't my goal with EZ-Template.  The next version of EZ-Template will need to find a way to solve this.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="v3x">v3.x<a href="https://www.roboticsisez.com/projects/about-ez-template#v3x" class="hash-link" aria-label="Direct link to v3.x" title="Direct link to v3.x">​</a></h2>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>EZ-Template v3 is not released yet, there is incomplete documentation for it <a href="https://ez-robotics.github.io/EZ-Template/next" target="_blank" rel="noopener noreferrer">here</a></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="about-3">About<a href="https://www.roboticsisez.com/projects/about-ez-template#about-3" class="hash-link" aria-label="Direct link to About" title="Direct link to About">​</a></h3>
<p>This version needs to solve the pre-tuned PID values.  The obvious solution to the problem is to not ship EZ-Template with pre-tuned constants but leave everything else the same.  Teams will know to copy/paste old constants, and my problem isn't solved.</p>
<p>EZ-Template uses a base unit of "ticks".  One tick means different things depending on the gear ratio of the drive, wheel size, motor cartridge, and what encoder they are using.  This means if a team wanted to switch from using the motor's built-in encoders to tracking wheels, they would have to completely retune everything.</p>
<p>This version of EZ-Template will solve this problem by using a base unit of inches.  No matter what sensor the user has, the code will always use inches.  This adds clarity for users by giving units, makes it so users can switch from built-in encoders to tracking wheels and keep the same constants, and stops forward/reverse v2 constants from working in v3.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">v2.x</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">v3.x</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">set_drive_pid</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">24</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> DRIVE_SPEED</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">wait_drive</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">set_turn_pid</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">45</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> TURN_SPEED</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">wait_drive</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_drive_set</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">24</span><span class="token plain">_in</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> DRIVE_SPEED</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_wait</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_turn_set</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">45</span><span class="token plain">_deg</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> TURN_SPEED</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  chassis</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">pid_wait</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<p>3.x of EZ-Template will also include a complete redo of all function names.  Function names previously were made by what made the most sense to me.  Need to set the drive to move using PID?  <code>.set_drive_pid</code>.  This makes sense in English, but while I was working with <a href="https://lvgl.io/" target="_blank" rel="noopener noreferrer">LVGL</a> I realized the benefit of naming in order of what you're looking for.  So now it'd be <code>.pid_drive_set</code>.  If you're looking to see everything you can do with PID on the drive, if you type <code>.pid_drive_</code> autocomplete will show you everything.  This makes autocomplete a more more useful tool when you don't know everything you can do in the library.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-2">Features<a href="https://www.roboticsisez.com/projects/about-ez-template#features-2" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>renamed functions</li>
<li>a relative turn function so it's not always absolute</li>
<li>a relative swing function so it's not always absolute</li>
<li>add piston and pistongroup class</li>
<li>practice mode for driving</li>
<li><a href="https://okapilib.github.io/OkapiLib/md_docs_api_units.html" target="_blank" rel="noopener noreferrer">okapi units</a> (so you can now use cm, in, meters, tiles, etc.)</li>
</ul>]]></content:encoded>
            <category>vex</category>
            <category>mentoring</category>
            <category>tutorials</category>
            <category>software</category>
            <category>open source</category>
            <category>wip</category>
        </item>
        <item>
            <title><![CDATA[Pure Pursuit]]></title>
            <link>https://www.roboticsisez.com/projects/pure-pursuit</link>
            <guid>https://www.roboticsisez.com/projects/pure-pursuit</guid>
            <pubDate>Tue, 21 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Pure Pursuit is a path-tracking algorithm that enables a robot to chase a "carrot on a stick".]]></description>
            <content:encoded><![CDATA[<p><a href="https://www.mathworks.com/help/nav/ug/pure-pursuit-controller.html" target="_blank" rel="noopener noreferrer">Pure Pursuit</a> is a path-tracking algorithm that enables a robot to chase a "carrot on a stick".</p>
<p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkMAAAC9CAMAAACH4InpAAAABnRFWHRUaXRsZQCo7tInAAAACHRFWHRDb21tZW50APbMlr8AAAAHdEVYdFNvdXJjZQD1/4PrAAAACHRFWHRXYXJuaW5nAMAb5ocAAAALdEVYdERpc2NsYWltZXIAt8C0jwAAAAl0RVh0U29mdHdhcmUAXXD/OgAAAA50RVh0Q3JlYXRpb24gdGltZQA19w8JAAAACnRFWHRDb3B5cmlnaHQArA/MOgAAAAx0RVh0RGVzY3JpcHRpb24AEwkhIwAAAAd0RVh0QXV0aG9yAKmuzEgAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAMAUExURf///4CAgAAAAP39/f8AAHZxcT90wUFxnH9/f9VQAPv7+5Svx4iHh4KCgvn7/YGBgbCvr0Rznrq6uqWlpa3B1Ojo6Pn5+f76+J+fn/Hx8YWFhUJ2wrOzs4+Pj16Gq4ODg5OTk93d3ff396qpqe7u7uvr65eXl/b4+vPz87+/v6Sjo/b29pWVldra2ouLi9ZTBa6trbW1tVSDyMfHx3Oa0m2Ss6urq4mJie63luGARuaUY1eCp9pjG+Tk5OLh4eXl5e3y9lN+pUp4oY+Li+vx+cXFxZycnMPDw5mZmeHp74CgvWCMzFqIys/Pz5Ox3OOMWHKWtsvLy9XV1dhcEJKRkc7Ozvvv5+KHUKC4zoimwdzb29fX18nJyZq23tLe6PP2+vHDqOifc5Cu27e3t91xMODg4PLy8txuLOB6PQUCAeOKVEd1n8DQ3rfL6Hp2dueZavPNtfLHrpizytxqJtleFIGk1sDBwb/R6voAAEp8xM7c78jX7Xqf1K3E5eurhLvN3PC+oP318OyuiXydu6KhofTTv+mieKempoAAANTU1Pjez9dYC+mke05+xvbaydrj7I6rxU16ouvw9LfK2sXU4fjj1t50Ne2yj9zm9O+6m+qogNXg6eft88/b5mWMr6K84Xed06fA46m+0qGensvZ5eTs9LvO6eKDSg0NDmiSz4Wn2IaCgvXWw3Z9gzoDAF4AAHMAABYVFeDp9bLF13eZuN7m7tHR0f3380hymH6h1WpqauIAANpnICQAAEFBQbXJ5/rs442NjdXh8vrp32KKrfzx6317e3JxdBsCAEpKSp0AABAAAGcAAG6W0PEAAPXXxJuXl1B8pFB0lZQAANoAAOcAAEsAAEEAAEd6xPnm22iOsPD099ZTBGB5kLoAAFYAAHmdzagAADc3N6a80NTS0rTH2FhxiYN+ftLQ0GZ5ilh2kskAAC4AACUrMWFgYFVVVSYmJj5nip+54NlgGLhlM2p7ixwbG5N0YV1xha69y8dkKJuxxcVZGIeTnqqwtpSy3JoQlWQAABnDSURBVHja7FxbTJPJHv8mjbFT+1Eol7akFWgLSimUptkWCoqr4WZiALnILQIBhOBGUQiPXFQgrgYveIm6+KDnxAf1yUv2wQc3bvbVrG+7Jz4dN2f3vO/DyclJzsx/pl8r19J+haXOL7Ed2/nmm878+P9////MfJIkICAgICAgICAgICAgICAgICAgICAgICAgsD047jhyZP6TGAeBWKFL3QVIzxJjIRAbrLs4XGIsBGLCwV0KisVoCMSC0jCHLonREIgFuWEO6cVoCMSCp2EO7RKjIRALWiI45C0S4yEQlx46o9VXa8SICGwWg2EO/aTValuOiyERiNkQUQoRmDPFmAhsDlnzjEI1p7r1jEWp+8WoCETnxfJ54fdLT//12EcKdq8BSCQy1gJRodXQYl/xYb6LUMggvJlAFNBYCVkurRKFdeZqU8XwCGyMIjM4rdVWyDTdQg4JbIxMG2VQzjExEn959KN5VqhD/axwCRVutpFaVKB2v7qyKYVKDogZ+uvDh9Lh/TJCXjZ5SK/bbCOlyL8snpJr4utWIfixumhclqb0oJjGbUU3csO7GXEypSNj/K1Wo7hEb5YDKFQaFZmbtFq/U0zkNiIP5bI3G+PQgRjM0Eqkook4rnYWUAYZaqOqbA9Q2VQodsluHwZRCX1zoAlGJj+YoSK/Hum9ebKf6CWQSZlygNb15ruyka2LiaAWhPT+IviygL7Al7kkjrIiQDepY0OyOX+zXSqhFMrujK52K0tclwjxnQjQsxCODc9CIEStD2EBcMgpUzPktAEJAsSaVDPNbURW6qG8Mv1ctkiSroARxa2j/tBPX1LhSxt1h1DrgORlVTZphSARnRs18/LcjEV1QhapjSy+UOnYwMrLlENW1CQhGQrUDLmQu0pyOhAqJk4OKFCA8qiHkm2dUhWlFuFJySdJ1yojH71ogr7INlJdRoPUYNXRiyyyvlPKr7FusudGupRhj76+pinAWCRkkcpQ1rod69fLJeywyDZagFnXQWgGsyFTViE9BGsFEP5Tq0PcnVdq5VXmaTRnJlwjLwEnNGdRJHUeKolFW2lcWuPm9gjZjTlAIiGLVEXEWYj1hUUd4ZAX1dLZHyQuywgkAdNRDNYkF2VSq9MEJiuPSaZ+JXpLpRzSU1OmR5ep6QF5xSW1LoBaYjlXaF/novrF9usdjb9WVFTsbWw82tH+zSugm9MhZFHizNBGh7LSUatOH9DRQp5OD0FZCypmGiiVfU+CtVzglJmzrlUqYXQi1qebeC43dV8gyVuRC2qwFYr8GoRaVJMpPbfaX97YvQJpPx7NqCcdgGBOq7eLuVcLtjCHjqxb0Y98zPqko24jyzOCzJZ0NlQt0US2EXgkSRPMPB2gmppVIb6PuC6Q1D7mvowQxoETZIK3gIpsFZAy1bh7HVR0TN1spfFctZh6taA7E7EHed2aXjRho4EWKfhsegvjkA7kNZXHlCGXmQHyU/1M3xy0ioUZsXRFUk8wfdRNdVBduCOcbfHh2vUbuzdEY0Z/TotOzL06qLLqz0Rrh4zIxuyLF7Xw5Q6ZfHBqHsl6lkAqsMmwbOVGtk9SkZUG7cSXmU9Jznkoc0kN7quFqicfKtCdypfMDqdUZIx/KS0l48fd0eH0y/+kbOe4L3ierPPtBXwhynZur9vOFqComyZMzkR7NtQHmRxWYGaIWBoKK5c/MmL6WYdkSACBNepn2aHs11RNy6EXLqm76FfVhHOQJorueHNn6poM+jqSJocbz2csLj34juDB0tLi+YsVn9Po5/M3EzWwtz1vNqhRhvtWYQ4+x0oNeDTKO03js9vJoE4/C3N/CnOoa90LjiG+YEoKfOVe55CR+1gXt0puZVXW3EVo4WZimmWp80Ef1fAX2gZkJP3ZKNcpHazJRnpXdJK61qBdfbfAVASD9na8uLayxr5rj16ejtTYRx8kZmin8YkNapzF08s/eufB+CorDuG2KO/Uh8u2jUCWQpuWo+RIiELp8bVZLAec3OlZE9VvXSnt8ipcf/BV2AB1LK3j7pbOP4yg0a+3wDkb1Y3RrobIsCaG8e3lHwVxOW6AkgmPRXuncrywbRxq4gQypBdrslzck8WXdnMGQs7IjxIV8+yvg16vWGPdd11hxVe/7duolVftEW7t4S0p06AtaVXzPOMJ3LtBDU/z8k/e46FneACKo5xLUaC5efscmR38WEst23bz++OnTx83xWkh3CwYA582mJheH2BrrCt008kQJ9I66qNr6eT1sFNr/B9ttUDFPlcqvsh0vxLj8fsmJoLGMG4OzpDSLC6n//dcmYmwKL0m7IHiJJ48dwd7gqyFC+SqsV7W2Di+0jBzZZiXm4PvoZ1tyyxqc0pVnenS0DZHEs4HEtPnY4z4yw9qaM6ncTZ0/H0Tecj2sH768Jw2nK7WItptXBnSOIRBFCN01u+w8gAh1F0qqedw5UKEhCJsGGOeqQEHoSYNzmb4VYREpmEojVMZzctXtlVSV3XvtDStxgh+7NLyRzG8Cumbhyc3mQlYDGcC/k1ZZFBJFimS2jSA78xKMyTgei9JI7jynGTq9eB7VPtMm4L4TtgKmd7QKuVMaRPDc+ItkcsNIJzIVTNBWu7D47NS25yHymhW7sNbLKkttYPSDobdBRTqX65bMrhTuvEiBkVzaxmLAk1qyKK+kKSexEPgxQYIb3px8ztmZOYoM54N46ApfMkkDkK0Ri9sY3brHrUx9/D4O0gFjEhtHjzLGltQyne2UlJrutINWscOplB+7qqHNw6F1jUaY0v2aBb3Kiz6SO/AExJxoTwkqYd4BF9OODSC7/OonnDIgwfw3Ygr2po9lCp3wfT04jcmCO7uUrKRq34pGyd+bRI/YUFbM6XcyBrSPHETYAQxmrNzn8jTufrhjWtcTJ/OiP2v64Wii77/Qx1Z1MwldRv2mLjGXiD/3nM+TVNJ/TmHmP6hYgnIA2wbwaOEMBwNNNgrU4QTL49ulaTWHTOHUkG+nUohTc2qhzcWuR97WB9P4ykZP38mruN9GuhCKL3zDA/xWJ1obIwZrzyEYERSj3LXxuP6EDyQGZhlqqiNtEBReWIUjNozxsE+pTyyNZK6yqoPMcjt27l2yEIMaeqyVVINTwqltccrYnrab4RlUdzPeFAk9TMWnxFlPUc51MamfYSanTIpGJEEKseTIQu2QK2WCYxYZZiFzDHOgjKi/pGV722FpLZ3F4QIpLdW7WRFLQ3mLM9b/oNLoQo1Fix6lPzA9/+Nl5GKpCbi+OyM9O0wHjdRZjxpk942YM+3TBa/a1YSkVwAQRQ2Ta4aYsbrBM0SeM5J0tsL46ClR0wzc9hDM9xKOfGS2htikPn1jt/psH8NKdR4SJ32618qi21/i1dSM9AYjPmiBVA5LKNzjstioos5c0xDNNyXWNB2lTCqgUVqfZLSwjB8AJmmsUqlPDy0BZI6Ewj0Q2ES7kCfOswm/Lp6axS3lBDtZVz6aoDN+xuepa6cY2kgmqUeD/4CJuYJq8cMURlQBHCVCJz7bONHEGI6U3CctABXSXNX8FjZDIvIoCxd2YqNH3XaHEdnMj7Z8hGXQr+p2WjKPw+H1kz29DDJJQkc9yXlA3Y1e9hUf72kcsOHOpTdRRkpkvTa3fklssbeZEmeH7OGiEs5ykP679S/ZXgPyd5FnU2rdeV/aQwaLM3RFibNr+kMrLotrYdP88V9CbnrlLIxpOJPuohm/ZKelW6ZgH1lPyTL76k1aEtWiQYOcem7J1FiJaX99GeZa331F7J9X3fcZeCBfHL48CzYseheMX31fGniUQLvfbMjTWHRx+dfyLPSM/sDoVRQbnVS2F4L7Fg0rFidOclCp7SpxN7+1cXwTscPfzzXmquSm0D2proQgbJTk+SRcgdhkTiwYhH9G2YgDi8lvAcPIk86fvj4PLmfle4KMaimKVkeRNAKftntXINCX7/aik4sfXZe9sOfE0nMoU9AoEB/0jzMW8PWaOZX/EUsMgrtvblFHbl2MS3yXOOe1dLX+T5XTo7ZbN3ZDkCn12pdn5InduCPm16Zo8jgJzd6/s/elQdFcaXxrjfYDEjNjAhEGZXbAU+CEMFVQ1zUCGiCx2I8EaUiVkA8WO5o1Cili5rEM7slWEoE3eIwia64eFCrgqLllmeO1dJYm63yzFHZra2t3e3u9/oaunt6HJGe6ff7Q4eZN6+6X//mve973/t+38u7luSABOFk9MUOkTPo69/yC2DR3OHnxr/iGI8KiEG56eDpshSyvdzrqZ0tpNGgTzgWRRrrAMhtuNt07eK1yqaGXOqPp4vdyPGd5bFbFlBuemDXn/Rs+BBTbS//mj4O+FrAIugS+obUgdzGe1e8WBQ/bGoH4NQD9xjmcZZg4wNP5VCYWSp5gyBQiCy1h8KgU1byeiL7DlKz5SmQ23TDS4ziOw0g94L2f95DJw7z7IpKE43GVw1aoxAFWwB/fD/hv83g1kkvCVy8BO5rPMQ2JyIEOfL9PZZEllmEHIW29+xhjB2st/9DHegs9pLElQbwbK52B7d/zFl2K+isv67q4SAK9e7xC4F7RhSFmrzkUNwInmnUx/Gdzu0lmiOG6+twlGYohFj0GNz1UkAj6NDmOHKn64dN1FvhdkShlRq5nB0/gPZiJQ4VNwA/bW4CwYDYAP3VWNLSLMSgA1z0UsSNS3WaXM0i6fSMqZ66LRQoP7eu1BqFIkFrsTKHvCqBUZvuir/nFgiYHtxPzsIL0BqFCAvolGBNe0Nj5bU71yG7rlyq04isiiGM0AfoddriLhQiLoB7UnY0wqVHd5uu3bsJNHEkmRZa0EVd7aBNjKmX4yYUIk6B6105dIvlUC77/+OOFr9No3rQfA2axagU+OuAQpHD5Ev6apFCFIckdqhbgT0QmXJ7KAw73hIM/fjRnr8PlDNavqTve1qkkDSHcoEcekJsJXpyKHe01fPzUjLM8iV90alFjVGIeAoedvXmZSkE/p25ce/Wcy/TjKb1ylihhaken5NisDB3avF1IwoRoaCyC4ceylIoF2bfz9g1Zl3WzldewuX5DuQDYjoo9RfNnFg0S6tZL4BZXu9o7qqngptdOHTyWtPdhnYpDrX7CPHnpOWJBWe69/oi9BQQgycW/aR3MFASUKoGB6I597pMkOP6nYuVjbdahcZRg09XjFyybOParR900+XN0VFALJBxHEIjlSi0Xou/pYGg0cE+9cl2kN/S8biO4tCTzVnvv7VrhgSTfFYvHbNuxc4XfoeGUP0ExAz0QYS+0ulMU/7aI2en1SFcdiLiTqKBU0zLqAwL2rP4zYeJiw6t+laKSqsOLUr8ULrIy3GVWnmGQEKnCAqVE5hACdHapBBB9AOtVxQD961AulqsYeeKdcuX/iTFpC273vo0a/NxcfvNPpkqPLpI/7Mhui0sGiWTx54MpTf+YtPqhT8BN5XCrp3glKJL/cHWtb9btmSLFJV+Slq+u4CrKZTl4zO2wIEb9oBxTDIIDBGF4MHlQcmavcLw++DWFYWofXO+GpmHMwWJi5JWSTHp23czF+394zniU/qPRQo7AoGvItnfNzFthLAlaJ1C1LO7D1pPyixknaCuhc5cVynz8MrOrHVjdq2WotIMaIov2SzDZKHQApb9E9oMkEJvTNH0VUY/BZcqpdazk7dAcwt8sMec6fDc1r0bM98dKUUln5FIUz8rc+zYzLXoCzmWEE5oYVYQ5o2QQlAob8IUrV/oiDrQes+eRTeackFH1NABdLDB73m2aL4q2L08aWwXFiWdoZw0VJFhDG14R3MBsRH+upP7G+cgBglVNScs0P6dBD4B4FLnHd4uunHxZi5oZqpjB24wGl0oJnm8y6bS6hXEcvY1UxxvGKqDOVd/i9hUs3I9DHh4us9B97iZlmYAwKPGSgqdNx9Rr38ZyDrZw4e4/nCzOAotff+rrfzmEl1oYSK9Pzs5WncEIgyLaftPYe6FutN93nOXGwp/reU+F9l4dn7yi+09ERFoN7WS8bWFmCpCxNDRlvGEDhG+gZmA58k2QGfOAtzrrjJiLP36xcx58acsFlFeftJetMu4hOcQU9DDV48MIqJmyqjCsECnPWZ73J1HP5/ERmbmWn6bWuCyjdStxzVcThWGxQKNHhhyHRbVu0XipZ9/NTziP3bzkB7xW+ZwXT95h3fbBI0eGHLdg6Nv3QVR0Ej/s0bjzzyHlumTQVBuWkoVhgWKs673QF8VKiWExDyXCeN7DGoL/pPnUIEuKYTkpmfJt0Bx1gSbB959ZF90OPWY018V1MH8WeiW6Q/jGLnpEQrOqA3FWW2eOQBhw1BUwrnTYZGcUkeIZfzxTEihQ8f1SCEDc+j1TQXZLXeIs7o2BBmokkGsM+JjhhEi5fHEpC1bknbr1J6mj73GKsQFDevdIc7qGsL9zc6bRf6epTzuEh6YFbdwUZBsm2cPAmsWOaGlGWUeMt0X0weNn9KHKEi2wONHAZpFOQ5cWOEf0Zg6quBuQTIXzaIIpQZD5w3rixnhND6BQbLP9XG34UrJpzmvhRiN5v6YE04CBcm+0/1ARE9GWc4xmBT8xK2mEUpG7K3TMXqw4cj3BzLogBgvtGDB1OEMyJkqJAO+RCnR+hwi35m9GExaPIITWoiJxNRhMcpsHOzwqHgtDJJ9odOshAO9EPJ1qjyuvI4xqjCxDlqhTLIEmz4HKacXh/NMKV7syQvtQ0YK0OzgbKhtH4xwfKPTUbrKcyg/RJ9HW+XxOlNYJNhBlXQTDJL9KlmvwxTKc+h7nCEmxjGoCuMg7wllknl0kEwZR3gO9cKsEXEDloUY4kiKwn0yyboLM3kK+WHeCBAEI4v+jhwMt8ok6x7E8hzagInDIzJUXm5aCB0FydT4ZXMxcziE+cnLTQvxua6CZA4nogOYOTzmyctNC4GCZAE6H62gIZBCV/HGkBAWozHW4akpz80kcxYTr57PHzwZj4MIvpMcj8jvYZBsOx4tDGnX3mELlEmWikNDGM8JRKG3MYUwnhMvLs56mPysG5piuAuFBi20f8jWPc52lUZyX4knKdyuL5VvmoKHXtuIUp2/IpOMWERRoMK+7QkHkwcZx720kgysZTJdCJpiaBLTgy3OUeiNWrv368nL5DT7xunKk0cZGc+/rKf+bUsjy6W7EDTF0CRiFLXNRD6bTD5rBVlT0eX5pziYPKp51lWTh2E3adJdVHclKIaGAEv6mtUI3LK6wfahelOcta2Mff5Ha26TJTVHU+DyRL0ZRzJtrAwd8tKo90pPkEcJopDMYzsoJKshVcqFTfguqKb748jb8/HT0iRgSV8lVRge22XyWf9HTSMm0sq8Pg0ffE0ptHAKiT2QXEXMcjQfmj0lcWKTOo2kDSFTOrlf2ITrgkgrqWFeYudMiwiDJX1z1LTtLROqr7WWpNDTTSnzmjycQrTVU1NGOZxn0CI3n16OykjyR5PpdBXNJxO/1DH8M5Wl02wTNmG7MFH0yU4xxeMVTYsYxSRFDY5UTyHvNV0+KCTpReYy45gV0tOGyB6exnwK6RBPZsO3prETE+fV0aiqFTdhu6A+p9/MhisehpaASvpGqDoLvFJON7iUjDMxO0TTaKuHbLOzh+PJIsioPdSyZk2Bb+WhiQkCLl/pP1LdiJqwXcwnL0MaFuFnpjHA5A2Vqb3y0tP1aBah16w8xklnkIfmmTiSZtgemg774VumEnp6Kec3lAppOwhC1ITtopw8rWKvAOPl43UmNzN4rosUqmApRFsz1WQN+z5cjViTOpumQzZcp6rJdDQxiUxqArYTNEFdUE1NhMiAwtAG5oQ4kJuWoNDKrp+Y4pCLvoc2jLN5I6eGNalpVpVZaTpAghytomesFDuTWsQh2ITtIoUhFGUVXcZPTWP7QqHKctMSFJI6czafe7IllGNWQVpPE6ai9FJ68qggSmkOpS807acc/jx6Xqk6SpyustJWtsik5hZAURO2iyI4uVXDKQpDSztDfsYBBlcpVFtClnIrUgVhqoK7OyYYRk0n0CZPejxty7Qxe0dVhbRtLDKpOV9O1ITtAjUVWE0YmtkbmkW4SiFq7eGefzn9jNvqrWTJZdq8KUMby/tLyJJsUxqzcn0WR5YcXhhPU0wQkD0hJIegCdsFalpvLcXPzE2hRCEMDEwhjO5Hb0whDEwhjBeLQKeSeg3bMYUw7DA9ONgJ4X9bKqYQhh3oE4tnVef1fpOAKYQhBlKFmaqy+R8GyQY4MHSKKEYVJlhtHbdtMBWxTwAeOQyEOYwqzFm1tW0PTsACQxhiwJK+k9QaQ9/10b1SHgaHfxw4cuTAKFjS16IyR94Gc4D0rNeJwdvRm3ghd/MolV/6ElnTnltaE8MJxPLVAPzCVH5nDTSFvN+24fHDIMbzqpMjVNYiWQg1gymfHovDYFCIYBl04V8q1W93wDr13h/twKOHQePXLIX+5P03pyahfbV48DAY5HMUUhWyWIMmIe93sCmEIZqHGAo5JtE2FB/z/mgNHjkMO3vo75AbqUqzS/L2PohC6z/GA4fBIayXiERfJ8syqPf/27tjHARhKADDbN1MiImjqydw6sQiSSfHusgBahi8AAMHMEY3iAPpDbyCB8DZ2XvIQBVCQNj/b2V7+fMKXTBuCV0YG5rm7Yjk/k9BQrGE0Laofzm60f2NWOVOMfGwjAwdYRnHZeh5h/r22ei8+TjTSxeQON+5VsSQLHCt3PSp2kav3BbqKX4F6YghYVi+Fv0oCKMkQU9BkoIw0upougH56ZX3IEw40Iqt3wzIpG++5jFVlOykrOqRS1XYGfMAAAAAAAAAAAAAAAAAAHx9AAuGJyeO4L+MAAAAAElFTkSuQmCC" width="579" height="189" class="img_ev3q"></p>
<hr>
<p>Pure Pursuit is a tracking algorithm that allows a robot to follow a given path by following a point some distance ahead like a carrot on a stick.  It requires some way of knowing where your current position is and a generated path.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="position-tracking">Position Tracking<a href="https://www.roboticsisez.com/projects/pure-pursuit#position-tracking" class="hash-link" aria-label="Direct link to Position Tracking" title="Direct link to Position Tracking">​</a></h2>
<p>Position tracking is a piece of code that given 2 or 3 encoders you can extrapolate the X, Y, and angle of the robot.</p>
<p>This is explained far better by others, and here are the resources that I used:<br>
<a href="https://wiki.purduesigbots.com/software/odometry" target="_blank" rel="noopener noreferrer">5225A Tracking Documentation</a><br>
<a href="https://www.youtube.com/watch?v=_T6KHywSP58" target="_blank" rel="noopener noreferrer">QUEEN Video Explanation</a></p>
<p>This code relies on the speed at which sensors update, because it figures out the change in position over the time it takes for sensors to update, and adds that change to a current global value.</p>
<p><code>LEFT_OFFSET</code> and <code>RIGHT_OFFSET</code> are the "track width".  This is the width between the tracking wheels on the robot,  I have them split into 2 variables because technically they do not need to be the same number.<br>
<code>CENTER_OFFSET</code> is the distance from a perpendicular tracking wheel to the turning center of the robot.  This number can actually be anything, but the nicest way is for this to align with the robot's turning center.  This can be tuned by turning the robot in place and adjusting this number until the XY stops rotating around the robot.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">tracking_task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> c_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> l </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// delta distance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> l_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> c_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> radius_r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> radius_c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> h </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> h2 </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// rad for big circle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> beta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> alpha </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> theta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> Xx </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> Yy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> Xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> Yx </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">while</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token boolean" style="color:hsl(29, 54%, 61%)">true</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">get_raw_left</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">get_raw_right</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    c_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">get_raw_center</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> l_last</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> r_last</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> c_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> c_last</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> l_current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> r_current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    c_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> c_current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> width </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> LEFT_OFFSET </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> RIGHT_OFFSET</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// diff between wheels for correcting turning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    theta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> r</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> width</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">theta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">!=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      radius_r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      beta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> theta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">2.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      h </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">radius_r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> RIGHT_OFFSET</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">beta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">2.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      radius_c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      h2 </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">radius_c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> CENTER_OFFSET</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">2.0</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">beta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      h </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> l</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      h2 </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      beta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    alpha </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> angle_rad </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> beta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    Xx </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> h2 </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">cos</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">alpha</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    Xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> h2 </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">alpha</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    Yx </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> h </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">alpha</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    Yy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> h </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">cos</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">alpha</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">x </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">Xx </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> Yx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> TICK_PER_INCH</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">y </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">Xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> Yy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> TICK_PER_INCH</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    angle_rad </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">theta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">to_deg</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">angle_rad</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    pros</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token function" style="color:hsl(207, 82%, 66%)">delay</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mecanum-drive">Mecanum Drive<a href="https://www.roboticsisez.com/projects/pure-pursuit#mecanum-drive" class="hash-link" aria-label="Direct link to Mecanum Drive" title="Direct link to Mecanum Drive">​</a></h2>
<p>Mecanum wheels allow the robot to move forward / backward and side to side.  These wheels get their own section here because they are effectively a cheat code for getting this code to work.  Because they can strafe, any error that's accumulated along the way can be accounted for.  With a drivetrain that cannot strafe, if you aren't following the path as exactly as you can, it becomes extremely difficult to account for it later.  This is why I chose this drive first, it allows me to go through all of this code without the problems that a typical drivetrain would give me.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/mecan_cad-7d3c32c0f976116b22930481f9921207.png" width="1405" height="812" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="point-to-point">Point to Point<a href="https://www.roboticsisez.com/projects/pure-pursuit#point-to-point" class="hash-link" aria-label="Direct link to Point to Point" title="Direct link to Point to Point">​</a></h3>
<p>To get the robot to move to a new target point, I need to calculate the amount the robot needs to move in the X direction, the amount the robot needs to move in the Y direction, and the amount the robot needs to move in turn.</p>
<p>The direction the robot moves will change depending on the desired end angle. Some trigonometry is done to figure out the relative directions the robot needs to go, as while the robot turns the motor powers will all change.</p>
<p>The final thing to do is scale everything down.  If X output and Y output both exceed the maximum power that can be sent to the motors, even if one is magnitudes larger than the other, the robot will end up going straight.  We solve this by scaling everything down to a larger number.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ZbMDKJ0zA3o?si=T7nrteA03m6vQWDE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">point_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Compute PID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  xPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">compute</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  yPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">compute</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  aPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">compute</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">get_angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Vector math</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> angle </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">to_rad</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">get_angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> raw_x_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">xPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">cos</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">yPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> raw_y_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">yPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">cos</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">xPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> raw_a_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> aPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">output</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Set output powers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> x_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> y_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> a_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">clip_num</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_a_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">60</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token number" style="color:hsl(29, 54%, 61%)">60</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> max_xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">110</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Vector scaling </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> max_xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">||</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> max_xy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> scale </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> max_xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      x_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">clip_num</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> max_xy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain">max_xy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      y_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_y_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> scale</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> scale </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> max_xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      x_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_x_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> scale</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      y_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">clip_num</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> max_xy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain">max_xy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    x_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    y_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Set motors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">raw_set_drive</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">x_output</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> y_output</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> a_output</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Mecanum drives that use the VRC wheels are slower when strafing than in forward / backward.  Because of this, I knew I'd want a mode where the robot would go straight for most of the motion and then turn at the end to face the desired angle.</p>
<p>This piece of code was added to the above function.  It modifies the target angle depending on how far away the robot is from the target position.  If it's more than 12" away, the robot will go faster and face the target position.  Once the robot is within 12" of the target it'll start to rotate to the desired angle.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/pIiadWcYlac?si=JW_q3pCaxF9RjtR2" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Add for direction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> dir </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> REV </span><span class="token operator" style="color:hsl(207, 82%, 66%)">?</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">180</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Set angle target</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> a_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">fast_move</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">distance_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">12</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      only_look_at_point </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(29, 54%, 61%)">false</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      only_look_at_point </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(29, 54%, 61%)">true</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">only_look_at_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">absolute_angle_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> add</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Compute angle PID and find the shortest path to the angle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  aPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">set_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">relative_angle_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">a_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  aPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">compute</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="paths-with-strafe">Paths with Strafe<a href="https://www.roboticsisez.com/projects/pure-pursuit#paths-with-strafe" class="hash-link" aria-label="Direct link to Paths with Strafe" title="Direct link to Paths with Strafe">​</a></h3>
<p>The paths the robot will follow will be points the user inputs.  In the example below, the robot will start at (0, 0), travel to (0, 24), then to (24, 24), then back to (0, 0).</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">autonomous</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">pure_pursuit</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">24</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> FAST_MOVE_FWD</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">         </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">24</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">24</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> FAST_MOVE_FWD</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">         </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> FAST_MOVE_REV</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">wait_drive</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once I have a list of points, to decide which point to go to next I see how far away the robot is from the next point.  The target position gets shifted until we're looking at a point that is a distance away from the robot, and it keeps changing until we're at the final position in the list.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">pure_pursuit</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">raw_move_odom</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">movements</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">pp_index</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">distance_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">movements</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">pp_index</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> movements</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">pp_index</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    pp_index</span><span class="token operator" style="color:hsl(207, 82%, 66%)">++</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">pp_index </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;=</span><span class="token plain"> movements</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">size</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      pp_index </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> movements</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">size</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">point_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>I cleaned up how the "turn type" is handled.  There are now 3 turn types:<br>
<code>FAST_MOVE</code> where the robot faces the target position and within 12" will move to the final angle
<code>LOOK_AT_TARGET</code> where the robot doesn't care about the end angle, and will always look at the target
<code>HOLD_ANGLE</code> where the robot will just hold its angle</p>
<p>I had to add <code>LOOK_AT_TARGET</code> because the distance away from the current target was less than 12", and the robot would always hold an angle even if I didn't want it to.  This lets me use <code>FAST_MOVE</code> as intended, and have all of my injected points follow <code>LOOK_AT_TARGET</code>.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/aUpCYLBIhE0?si=LELL8e9J1XWCjrY3" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Add for direction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> current_turn_type </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> FAST_MOVE_REV </span><span class="token operator" style="color:hsl(207, 82%, 66%)">||</span><span class="token plain"> LOOK_AT_TARGET_REV </span><span class="token operator" style="color:hsl(207, 82%, 66%)">?</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">180</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Set angle target</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">current_turn_type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Looks at the target until final distance then goes to the final angle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">case</span><span class="token plain"> FAST_MOVE_FWD</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">case</span><span class="token plain"> FAST_MOVE_REV</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">distance_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> TURN_FAST_MOVE</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">absolute_angle_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> add</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">break</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Looks at target the entire motion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">case</span><span class="token plain"> LOOK_AT_TARGET_FWD</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">case</span><span class="token plain"> LOOK_AT_TARGET_REV</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">distance_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> STOP_UPDATING_ANGLE</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">absolute_angle_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> add</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">break</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Holds angle the entire motion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">case</span><span class="token plain"> HOLD_ANGLE</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">default</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">break</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="final-mecanum">Final Mecanum<a href="https://www.roboticsisez.com/projects/pure-pursuit#final-mecanum" class="hash-link" aria-label="Direct link to Final Mecanum" title="Direct link to Final Mecanum">​</a></h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/pVcdgffsMnA?si=P3Cc8XRpN6KGd6hI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<iframe width="560" height="315" src="https://www.youtube.com/embed/A_Q_yBHhWSY?si=9qDZo20ImXHNNA5K" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tank-drive">Tank Drive<a href="https://www.roboticsisez.com/projects/pure-pursuit#tank-drive" class="hash-link" aria-label="Direct link to Tank Drive" title="Direct link to Tank Drive">​</a></h2>
<p>Now the goal is to get this all working properly on a tank drive setup.  I have a kind of working version <a href="https://github.com/EZ-Robotics/peewee" target="_blank" rel="noopener noreferrer">here</a> but I didn't have a lot of time with that robot to really iron everything out.  More will be coming soon.</p>]]></content:encoded>
            <category>vex</category>
            <category>software</category>
            <category>wip</category>
        </item>
        <item>
            <title><![CDATA[The Pushbot]]></title>
            <link>https://www.roboticsisez.com/projects/the-pushbot</link>
            <guid>https://www.roboticsisez.com/projects/the-pushbot</guid>
            <pubDate>Fri, 17 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[The Pushbot is a simple robot I made to demonstrate how strategy can get backed into a robot's design for the VRC game Spin Up.]]></description>
            <content:encoded><![CDATA[<p>The Pushbot is a simple robot I made to demonstrate how strategy can get backed into a robot's design for the VRC game Spin Up.</p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/final_cad-54c0a4e166bf9c83fe02400db3aac167.png" width="851" height="818" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="about">About<a href="https://www.roboticsisez.com/projects/the-pushbot#about" class="hash-link" aria-label="Direct link to About" title="Direct link to About">​</a></h2>
<p>The goal of this robot was to make a robot without a shooter to be as competitive as possible for the VRC game Spin Up.  Students liked the idea of this, so they helped create a list of constraints that my robot needed to have:</p>
<ul>
<li>no intake</li>
<li>no shooter</li>
<li>block others from shooting discs</li>
<li>block others from shooting expansive</li>
<li>anti wedges and wedges</li>
<li>needs to spin rollers</li>
<li>follows VEXU rules (8 motor drive)</li>
<li>eat all the discs from the center line during autonomous</li>
<li>molded traction wheel</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="design">Design<a href="https://www.roboticsisez.com/projects/the-pushbot#design" class="hash-link" aria-label="Direct link to Design" title="Direct link to Design">​</a></h2>
<p>To block shots, we had an idea that we were calling a windmill.  This beautiful image made by "CAD" was made to showcase how the structure will work on this robot.  With two intersecting diagonals, the structure for a roller and the windmill support each other.  This all requires a sturdy enough drive train.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/windmill_og_cad-e8f383ce2d9431c8e80460a6b5fe96ef.png" width="552" height="552" class="img_ev3q"></p>
<p>When I was competing in Change Up, I made a drive base that used a 1/4" piece of 6061 aluminum for the main structure and had a piece of 1/16" sheet at the front.  I didn't realize at the time how overkill this bracing was, but this gave me confidence in making an extremely sturdy drivetrain with nothing but a 1/16" aluminum sheet.</p>
<p>This is my first draft of figuring out where everything will go.  I generated gears for the drive to let my 3.25" wheels go 510rpm, which has the robot moving at ~86"/s.  The drive channels are 1" square tubes that I'll bandsaw down the middle  The top and bottom plates are 1/16" aluminum that I'll order from Send cut Send.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/1stdrive-4d550578f8296ecd5a51fccc16efbcc1.png" width="1370" height="635" class="img_ev3q"></p>
<p>With how tall the motors are it needed some brace to stop the entire thing from bending backwards.  I added a triangle brace to the side of them and added in the gears that the top 2 motors will be spinning.  I'll need to make a plate to support the other end of those shafts later.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/first_triangle-2645b23176c704e853e2e3254c5adc32.png" width="1526" height="770" class="img_ev3q"></p>
<p>I added diagonals for the windmill and the roller mechanism.  The roller will be a 3" flex wheel spinning at 50rpm.  The windmill is a thin piece of nylon tube I found on McMaster, this will be very light and easy to spin up fast to block people from shooting discs.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/windmill_size-53d91a4dff7850768d6170d8ef31d397.png" width="725" height="733" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/roller_and_windmill_strutcure-e8d36dd73d9c4dc646473a3798f2955c.png" width="823" height="809" class="img_ev3q"></p>
<p>I designed a hub for the flex wheels where a 1/4" ID bushing would sit.  This would spin on a round standoff.  To interface the gear with the mechanism I have interlocking geometry between the gear and the flex wheel hub so the force gets distributed nicer.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/flexwheel_mount-2bd29439ce55bf986fcc513e0c0eabe8.png" width="1034" height="745" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/roller_gear-320c7d0785e585c66437c5477c9d4172.png" width="728" height="803" class="img_ev3q"></p>
<p>I'm using a 100rpm motor geared down 2:1 so the roller spins at 50rpm.  The idler gear is spinning on a round standoff that is also being used to mount the motor.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/roller_assembly-326ce98241758b614d4333c3da39abc9.png" width="748" height="750" class="img_ev3q"></p>
<p>I designed a hub to hold 1/4" ID bushings for the tube, and I have the same interlocking geometry between the gear and the tube.  This is geared 1:1 and will use a 600rpm motor.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/windmill_gearbox-6ee89b2bb08154778b9d429fdf33b038.png" width="1565" height="695" class="img_ev3q"></p>
<p>A problem the windmill has is expansion.  A robot cannot be larger than 18" when entering the low zone, and this is larger than 18" unless it's parallel to the ground.  To solve this I'm adding a ratchet so that when the motor spins backward the windmill will sit in a position where it's not larger than 18".</p>
<p>The pink pawl will be rubber banded to click into the ratchet.  When the windmill spins in one direction, the pawl will slop and this will be allowed to spin.  When the motor spins in the opposite direction, the pawl will engage the ratchet and this will sit in size.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/ratchet-ec9e598d62518ca7d2e498c1363b2255.png" width="945" height="785" class="img_ev3q"></p>
<p>This robot will be doing a lot of pushing and I need to make sure nothing on the drive breaks.  For the gears on the omni wheels, I copied the spoke pattern in VEX's 3.25" wheel so this gear interlocks with the wheel.  All of the force will get distributed across the print, and screws will be used just to keep it from falling out.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/wheel_gear-f51c9b9a4e8d2e060967425970dacac5.png" width="985" height="797" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/omni_wheel_and_gear-807799f688ca6a090a89c4b769801223.png" width="740" height="696" class="img_ev3q"></p>
<p>The molded traction wheel gets little T's around it so the rubber will have a harder time falling off.  There are also pools of open space around some of the T's to hopefully stop the rubber from peeling off.  This is similar to how I've made molded wheels before, so I feel confident this will have no problems.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/traction_core-efcee0d00a5cb436f12fee255c8fc338.png" width="941" height="806" class="img_ev3q"></p>
<p>The wheel also gets pocketing so a gear can interlock with it.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/traction_wheel_and_gear-2033cc88ed7d1b4896cef063426f86c0.png" width="905" height="792" class="img_ev3q"></p>
<p>I made a part to support the motor shafts.  It screws into the motor gap and gets a lower mounting point that has a standoff going to the outer drive channel.  It can't go to the inner drive channel because the gear is in the way.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/motor_shaft_support-84859b510f3ecf798d4d37f2ba75db85.png" width="1403" height="575" class="img_ev3q"></p>
<p>I also changed up the motor mount triangle support to be in the center to give some more space on the outside.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/motor_cap_with_triangle-9a1434847e4ed05a8bc1f5d7a354e6e3.png" width="1127" height="802" class="img_ev3q"></p>
<p>For the plow to take all of the discs off of the center line, I needed a pneumatic tank.  I made space for one in the center and made cutouts for the tank in the drive bracing.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/tank_mount-6e67e02b5947d5ccddd170d0c508ea45.png" width="1417" height="780" class="img_ev3q"></p>
<p>Because pushing discs with a flat surface isn't possession, I made the front of the robot able to turn into an angle.  This is still a flat surface, and when I drive along the center line all of the discs will come to my side of the field.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/plow_cad-88050766c91d1dacee8bad721de7a009.png" width="1052" height="441" class="img_ev3q"></p>
<p>I used a spare wedge from Change Up and had a simple mount for it.  For everything to be in size, the wedge needed to start up and there's a piston to release it with the Star Wars battle droid-looking mechanism.</p>
<p>And with that, the CAD was done.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/final_cad-54c0a4e166bf9c83fe02400db3aac167.png" width="851" height="818" class="img_ev3q"></p>
<p>Ultimately we found out it was illegal to use the windmill, so sadly that will not make it into the assembly.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="assembly">Assembly<a href="https://www.roboticsisez.com/projects/the-pushbot#assembly" class="hash-link" aria-label="Direct link to Assembly" title="Direct link to Assembly">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assembling-based-on-cad">Assembling Based on CAD<a href="https://www.roboticsisez.com/projects/the-pushbot#assembling-based-on-cad" class="hash-link" aria-label="Direct link to Assembling Based on CAD" title="Direct link to Assembling Based on CAD">​</a></h3>
<p>The aluminum came in from Send Cut Send and looks great.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/alu-267943d1b343df7e0e26837fb4098f90.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>The tank and motor mounts all fit in nicely.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/with_tank-4f5c2d6ee032d6894fa1324fb1b3f95c.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I used (too much) dykem blue to drill the holes in the angles and c-channel.  I used calipers (not my nice pair) to scribe lines into the metal, and center punched hole by hole and made new lines based on those holes.  This was my first time doing this and it all went really well, the accuracy on everything is more than enough for what this is.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/dykem-03ba1841d7c3b61e299ddc445fb0d0d5.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>Everything is coming together very smoothly and as I planned.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/lulu-7dd72a911237c2ee1309deaf3dceb67c.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/finished_roller-0e272f4ddced04ef9655f85d87ba34c4.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>The plow uses zip ties to push discs, these were eventually cut to not touch the floor.  I used zip ties because this needed to be stiff enough to push a disc but flexible enough to allow the robot to go over a ~1" barrier, and zip ties accomplished that simply for me.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/eyelash_in-ee772f62781514def544d5677779ed2c.jpg" width="4032" height="3024" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/eyelash_out-7787fc6139a0db8b9ceac1551c5d7a09.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I added pivoting pieces of plastic to the side of the robot to stop opponents from being able to push as well.  When they try to push me, they'll drive up me and add weight to my robot.  It will still be possible to push but less effective.  These are on hinges to ensure they always touch the ground and are lower than the opponents.  This type of anti-wedge was inspired by the Battle Bots robot Hyrdra.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/anti_wedge-354f7e7a6d9a78f944e518f75a94a9af.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>The wedge is mounted to lift up opponents a bit when pushing them, which makes this robot functional!
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-c323c6f3a8a61036cd2fed666c47fed1.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>Later I made the traction wheel and got that mounted.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/mounted_traction-f9244bc3f8509da7e6cee751555cab76.jpg" width="3212" height="1706" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lift">Lift<a href="https://www.roboticsisez.com/projects/the-pushbot#lift" class="hash-link" aria-label="Direct link to Lift" title="Direct link to Lift">​</a></h3>
<p>With no windmill, I felt like this robot needed a way to block <em>something</em>.  What I decided on building was a 6 bar that is rubber banded up and locked to the chassis with a piston.</p>
<p>The first thing to do is design a mount for the lift to sit on, I made this out of 1/16" 6061 and mounted it through the roller.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/first_lift-af7b241996e116597d6805d3c86b0245.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>Because the geometry between these bars is strange, I prototyped the shape of the connecting linkage with cardboard.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/middle_linkage-48fd082e3d221387607cffdb6fa6fa1f.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>I made the top linkage out of some 1/16" polycarbonate angle I had, and this lift was pretty light and able to lift high enough to block the entire goal (which is illegal, but I can do it!).  This is still using a prototype final linkage though.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/lift_raised-addd181963817cc7a9e3531ac1603746.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>And with a real linkage made for the last vertical, this lift can rise to a height of 51".
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/lift_with_real_linkages-4ddd66a6052ccb0fcf662e40739cfc8e.jpg" width="3024" height="4032" class="img_ev3q"></p>
<p>I made printed hooks that held onto arms and stopped them from coming out.  When the lift was raised, these arms would extend outwards.  This extra width would allow me to make an expansion blocker that is much wider than I otherwise could.
<a href="https://youtu.be/AdtnW2aCjzA?si=CMxP5raOcw8IP5xM" target="_blank" rel="noopener noreferrer">https://youtu.be/AdtnW2aCjzA?si=CMxP5raOcw8IP5xM</a></p>
<iframe width="315" height="560" src="https://youtube.com/embed/AdtnW2aCjzA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<iframe width="315" height="560" src="https://youtube.com/embed/fhauUic9YH4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>To actually block, I used an old bed sheet I had.  It's ugly but it works and didn't cost anything.</p>
<iframe width="315" height="560" src="https://youtube.com/embed/coOcKaicCWo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>]]></content:encoded>
            <category>vex</category>
            <category>hardware</category>
            <category>software</category>
            <category>cad</category>
        </item>
        <item>
            <title><![CDATA[Supernova Spectacular Awards]]></title>
            <link>https://www.roboticsisez.com/projects/supernova-spectacular-awards</link>
            <guid>https://www.roboticsisez.com/projects/supernova-spectacular-awards</guid>
            <pubDate>Sun, 04 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[For Supernova Spectacular 2022, I designed and made 19 custom awards to give out during the event.]]></description>
            <content:encoded><![CDATA[<p>For Supernova Spectacular 2022, I designed and made 19 custom awards to give out during the event.</p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/excellence-81f04b15785818b659c3c132fde14ab1.JPG" width="6000" height="4000" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="design">Design<a href="https://www.roboticsisez.com/projects/supernova-spectacular-awards#design" class="hash-link" aria-label="Direct link to Design" title="Direct link to Design">​</a></h2>
<p>The event was giving out 9 awards per competition, and we held a Middle School competition on Saturday and a High School competition on Sunday.  This meant I had to make double the amount of awards.</p>
<p>RECF sends some awards for free to give out for your first event.  We could have bought the rest of the trophies from RECF / VEX, but for a similar price, we made custom cooler awards that we felt teams would be happier getting.  I ended up making custom awards for the highest awards (excellence, tournament champion, robot skills) and made my own plaques for the standard VEX trophies.</p>
<p>The award list to make is:</p>
<ul>
<li>Excellence x2</li>
<li>Tournament Champion x4</li>
<li>Skills Champion x2</li>
<li>Design x2</li>
<li>Judges x2</li>
<li>Think x2</li>
<li>Build x2</li>
<li>Create x2</li>
<li>Volunteer of the Year x1</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="special-awards">Special Awards<a href="https://www.roboticsisez.com/projects/supernova-spectacular-awards#special-awards" class="hash-link" aria-label="Direct link to Special Awards" title="Direct link to Special Awards">​</a></h3>
<p>I did research into how other teams made their awards.  These two stood out to me the most.  I liked having game elements behind the award, and I liked the aluminum plate for the front.</p>
<img src="https://www.roboticsisez.com/assets/images/aubie_award-8935bdeb7a6035ad37b9a3fb6f4285b8.png" alt="Example banner" style="width:37%;height:auto">
<img src="https://www.roboticsisez.com/assets/images/caution_tape_award-c523e7bdbc0ae7a39ec2ac15186e1b43.png" alt="Example banner" style="width:50%;height:auto">
<p>My first attempt had the discs purple instead of yellow for supernova colors.  I felt this took away from the point of them being game elements from that year, so I changed the purple to yellow.  This part will be made in 2 parts, one that I change the filament halfway through to get the yellow, and one to go around that and act as a border.</p>
<img src="https://www.roboticsisez.com/assets/images/purple_disc-488c95e0e52e535252fbda78cfd71d50.png" alt="Example banner" style="width:43%;height:auto">
<img src="https://www.roboticsisez.com/assets/images/yellow-cbaf2b92f46db13a93e174b1494d7c4c.png" alt="Example banner" style="width:43%;height:auto">
<p>With the back of the part done, I started designing the front.  It needed to say <code>SUPERNOVA SPECTACULAR</code>, the name of the award, and the Supernova logo.  This meant for each version of the trophy the only thing I change is the bottom award name.  I made the image below to see if I liked the way this looked, but it is impossible to create like that because of floating material in letters like <code>O</code> and the inside of the Supernova logo.</p>
<img src="https://www.roboticsisez.com/assets/images/impossible_tc_render-4fccd10f2ea5aa6c67b5b4ee539eda04.png" alt="Example banner" style="width:43%;height:auto">
<p>This was fixed with some connecting pieces between floating parts.  It changed how the logo looks a bit, but (before I wrote this article about it) no one noticed but me.</p>
<img src="https://www.roboticsisez.com/assets/images/possible_tc_alu-a03420da9843e8fc4829edf454f07f2d.png" alt="Example banner" style="width:43%;height:auto">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="plaques">Plaques<a href="https://www.roboticsisez.com/projects/supernova-spectacular-awards#plaques" class="hash-link" aria-label="Direct link to Plaques" title="Direct link to Plaques">​</a></h3>
<p>With limited space on the trophy, I couldn't fit the Supernova logo on the plaque.  Just putting <code>SUPERNOVA SPECTACULAR</code>, and <code>2022-2023</code> along with the award name doesn't look overcrowded.</p>
<img src="https://www.roboticsisez.com/assets/images/think_award_plaque-c7b88d34d24f41bfb54cdb7412d4bb8e.png" alt="Example banner" style="width:43%;height:auto">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="assembly">Assembly<a href="https://www.roboticsisez.com/projects/supernova-spectacular-awards#assembly" class="hash-link" aria-label="Direct link to Assembly" title="Direct link to Assembly">​</a></h2>
<p>Here is the final part before fabrication was started.</p>
<img src="https://www.roboticsisez.com/assets/images/tc-v2-905e752d3bbf7d42d30c6980ac39b636.png" alt="Example banner" style="width:43%;height:auto">
<p>I made one to make sure it worked before printing the rest of them.</p>
<img src="https://www.roboticsisez.com/assets/images/first_done-2aa497e4cc07d58c303002067fc57a81.jpg" alt="Example banner" style="width:43%;height:auto">
<img src="https://www.roboticsisez.com/assets/images/printing_more-ae6c2a88bb1ed6f2acc9f7b18a22427a.jpg" alt="Example banner" style="width:43%;height:auto">
<p>This is a 2 part assembly, where one is printed with the text and the second is spray-painted purple and put behind the plaque.</p>
<img src="https://www.roboticsisez.com/assets/images/design-2a43d5925fc3002964255c9f16ddb021.jpg" alt="Example banner" style="width:43%;height:auto">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="final-results">Final Results<a href="https://www.roboticsisez.com/projects/supernova-spectacular-awards#final-results" class="hash-link" aria-label="Direct link to Final Results" title="Direct link to Final Results">​</a></h2>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/final_all-af68fa309f2ef6e8f7209864e75822e8.JPG" width="6000" height="4000" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/excellence-81f04b15785818b659c3c132fde14ab1.JPG" width="6000" height="4000" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/tournament_champion-6d82b4e312334013580cb21d1e6b905f.JPG" width="6000" height="4000" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/double_tc-2cde0298f2f546cc0500f370991b9f77.JPG" width="6000" height="4000" class="img_ev3q"></p>]]></content:encoded>
            <category>vex</category>
            <category>hardware</category>
            <category>cad</category>
            <category>build log</category>
        </item>
        <item>
            <title><![CDATA[Preload Disc Holder]]></title>
            <link>https://www.roboticsisez.com/projects/preload-disc-holder</link>
            <guid>https://www.roboticsisez.com/projects/preload-disc-holder</guid>
            <pubDate>Thu, 27 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[I made disc holders to help run Spin Up tournaments more efficiently.]]></description>
            <content:encoded><![CDATA[<p>I made disc holders to help run Spin Up tournaments more efficiently.</p>
<p><a href="https://www.printables.com/model/329950-vex-spin-up-preload-holder" target="_blank" rel="noopener noreferrer">https://www.printables.com/model/329950-vex-spin-up-preload-holder</a></p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-d1005ed871682fc5949d5f6b2a0d3e00.jpg" width="1605" height="1204" class="img_ev3q"></p>
<p>In the VEX game Spin Up, there are 11 discs that stay out of the field per side.  7 are match loads that can be loaded at any time during driver control, and 4 are preloads, 2 per robot.  To help people reset the fields easier, and to help competitors quickly know if they have the correct amount of discs, I made a printable preload holder.  Once the discs are flush with the stems of the print, the team has the correct amount of discs.</p>
<p>These parts lasted a surprising amount of time given they were printed and were next where high school and middle school students were standing all day.  They lasted around 6 tournaments before they were too broken for use.  They are assembled using standard VEX hardware, 8-32 screws, and 11/32 locknuts.  The files are public for anyone to use.</p>]]></content:encoded>
            <category>vex</category>
            <category>hardware</category>
        </item>
        <item>
            <title><![CDATA[EZ GUI]]></title>
            <link>https://www.roboticsisez.com/projects/about-ez-gui</link>
            <guid>https://www.roboticsisez.com/projects/about-ez-gui</guid>
            <pubDate>Fri, 02 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[EZ-GUI is a simple-to-use VEX V5 screen GUI that intuitively keeps track of motor temperatures and allows users to select autonomous routines.]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/EZ-Robotics/EZ-GUI" target="_blank" rel="noopener noreferrer">EZ-GUI</a> is a simple-to-use VEX V5 screen GUI that intuitively keeps track of motor temperatures and allows users to select autonomous routines.</p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-5840dad9c5efccd33691c05877d6e1da.png" width="480" height="272" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="about">About<a href="https://www.roboticsisez.com/projects/about-ez-gui#about" class="hash-link" aria-label="Direct link to About" title="Direct link to About">​</a></h2>
<p>I've seen other teams with UIs that have many pages and can do a bunch of stuff, but I wanted something simple.  The <a href="https://pros.cs.purdue.edu/v5/tutorials/topical/llemu.html" target="_blank" rel="noopener noreferrer">LLEMU</a> is great for an autonomous selector but it's difficult to implement motor temperature readings.</p>
<p>All of the displayed names for my autonomous routines are short, so I could dedicate a very small portion of the screen to that.  The rest of the screen could be split into a grid and just have a light gray outline to start.  As motor temperatures heat up, the color of the box will increase to eventually be the same color as the left/right buttons for the autonomous selector.  The closer they are in color, the warmer the motors are.  There's black text showing the name of the motor as well.</p>
<p>I like this method of detecting temperature because under normal use the brain screen shows nothing.  Then as you use the robot more, you'll see something catch your eye and it reminds you to slow down / let the robot have a break.</p>
<p>This isn't documented or an officially released library yet, but the plan is to eventually set that up.  I'd like to add different screens as well instead of temperature reading, like a logger or being able to graph stuff.</p>]]></content:encoded>
            <category>vex</category>
            <category>open source</category>
            <category>software</category>
            <category>wip</category>
        </item>
        <item>
            <title><![CDATA[Harvard-Westlake- BLZ-i]]></title>
            <link>https://www.roboticsisez.com/projects/harvard-westlake-blz-i</link>
            <guid>https://www.roboticsisez.com/projects/harvard-westlake-blz-i</guid>
            <pubDate>Fri, 22 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Inspired by the 118 Everybot, Harvard-Westlake wanted to make simple, competitive designs for the VEX Robotics Competition Spin-Up.]]></description>
            <content:encoded><![CDATA[<p>Inspired by the <a href="https://www.118everybot.org/" target="_blank" rel="noopener noreferrer">118 Everybot</a>, Harvard-Westlake wanted to make simple, competitive designs for the VEX Robotics Competition Spin-Up.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_EREBglZZcA?si=cn0sSXxFQpLpzNfr" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>Harvard-Westlake hosted three one-week long summer camps where ~12 students would come for a one-week intensive of robotics where we wanted to condense an entire season into one week.  We split students into 4 groups and had each group assemble BLZ-i.  The goal of the summer camp is to teach students the importance of build quality and how it leads to consistency and longevity in every part of a robot.</p>
<p>During this one-week intensive, students learned build quality, and the importance of squaring drives, and had a full day and a half of tournaments where over 20 matches were run.  Students learned to maintain their robots as screws would come loose and learned to iterate flaws in the design in an attempt to make it more consistent.</p>
<p>My role in the summer camp was to mentor students in build quality, maintaining and iterating the example robots to be more consistent and easier to assemble, and assisting anywhere I could in students taking the lead on software that becomes public for the <a href="https://www.vexforum.com/t/harvard-westlake-robotics-blz-i-reveal/104867" target="_blank" rel="noopener noreferrer">forum post</a>.</p>]]></content:encoded>
            <category>vex</category>
            <category>mentoring</category>
            <category>tutorials</category>
            <category>spin up</category>
            <category>hardware</category>
            <category>software</category>
            <category>cad</category>
        </item>
        <item>
            <title><![CDATA[VEXcode Tutorials]]></title>
            <link>https://www.roboticsisez.com/projects/vexcode-tutorials</link>
            <guid>https://www.roboticsisez.com/projects/vexcode-tutorials</guid>
            <pubDate>Mon, 14 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[After I saw the success of the CAD tutorials, I decided to do the same for code.  I made click-by-click tutorials on code concepts to enable students to ask specific questions instead of "How do I code the robot?".]]></description>
            <content:encoded><![CDATA[<p>After I saw the success of the CAD tutorials, I decided to do the same for code.  I made click-by-click tutorials on code concepts to enable students to ask specific questions instead of "How do I code the robot?".</p>
<p><a href="https://github.com/EZ-Robotics/VEXcode-Tutorials" target="_blank" rel="noopener noreferrer">https://github.com/EZ-Robotics/VEXcode-Tutorials</a></p>
<p>There are tutorials for super kit robots, and there are discussions on forums about advanced software like pure pursuit and motion profiling, but there is a lack of resources for the middle ground.  Code that is more complex than moving the robot with joysticks, and less complex than motion profiling.  That's where these tutorials come in.</p>
<p>The tutorials start basic with spinning motors, joystick control, and more advanced control schemes like toggles, ladders, feedback loops using P from PID, and a GUI selector for selecting an autonomous routine.</p>
<p>The biggest difference between teaching CAD and code through documentation is people can copy/paste code, and cannot copy/paste CAD without the source files.  To combat this I made sure to have a section on debugging, which goes into how to use the <code>printf()</code> function to read what variables are set to.</p>
<p>In autonomous routines for VRC, robots usually move straight and turn.  I wanted to teach students how to use feedback controllers to get the robot to move, but if I have code for turning and driving students will copy/paste both.  I only have a tutorial for turning, and students can extrapolate how to modify the code for going straight.</p>]]></content:encoded>
            <category>vex</category>
            <category>mentoring</category>
            <category>tutorials</category>
            <category>software</category>
            <category>open source</category>
            <category>wip</category>
        </item>
        <item>
            <title><![CDATA[Dave]]></title>
            <link>https://www.roboticsisez.com/projects/dave</link>
            <guid>https://www.roboticsisez.com/projects/dave</guid>
            <pubDate>Wed, 01 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Dave was a little robot that I made quickly for testing software.  Everything on it is either 3D printed or laser cut from Send Cut Send.]]></description>
            <content:encoded><![CDATA[<p>Dave was a little robot that I made quickly for testing software.  Everything on it is either 3D printed or laser cut from <a href="https://sendcutsend.com/" target="_blank" rel="noopener noreferrer">Send Cut Send</a>.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-24a5349992c400b618c7b65417bf6ea8.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>I started out with a double roller omni-wheel assembly that had a gear baked into the print.</p>
<img src="https://www.roboticsisez.com/assets/images/wheel1-c2316005ca23ce3def2fefaeca8a2f67.JPG" alt="Example banner" style="width:43%;height:auto">
<img src="https://www.roboticsisez.com/assets/images/wheel3-1807a9e5bbf8d6a02685ec9251d8c9d5.JPG" alt="Example banner" style="width:45%;height:auto">
<p>I looked through my parts and found out I didn't have enough rollers from the old VEX 3.25" wheels, but I did have enough from their 4" wheels.  I redesigned the wheel using the dimensions from those rollers.  Left is 3.25" roller, right is 4".</p>
<img src="https://www.roboticsisez.com/assets/images/wheel2-a6eed4a22cfe30b00079841711fac607.png" alt="Example banner" style="width:100%;height:auto">
<p>I wanted all of the gearing to be enclosed in the drive so I needed smaller idler gears.  The ratio is 2:1, I'll be using a 1200rpm motor to make the output wheel go 600rpm.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/innergears2-c1a42640a43628fb848123b4bbf34841.png" width="1372" height="654" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/innergears1-b9ffb897eee1db30006f51f9a13275ec.png" width="1340" height="677" class="img_ev3q"></p>
<p>The motor fronts were integrated into the drive, and the gearing was done!  All that was left was to make an electronics holder, a simple sheet to hold everything, and make sure there were cutouts for tracking wheels.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/fullcad1-8e0d8e95b70b140233fd22765ce83c17.png" width="1346" height="798" class="img_ev3q">
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/fullcad2-e8cfa3d6df7aa63341be4c3577ace1e6.png" width="1328" height="776" class="img_ev3q"></p>
<p>The assembly was very smooth.  Inserts got pressed into the wheels and they spun on round standoffs.  Everything else spun on screws.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/notdone-e64e5adf8c4b17b4ec34877b9b730e7e.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>And when assembly was all done, it looked just like the CAD!  The robot helped me program for about 6 months, but I had other more realistic robots to use for software testing then.  T
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/outdoor-368fa33db0f0408101a26a23e7fef3ce.jpg" width="4032" height="3024" class="img_ev3q"></p>]]></content:encoded>
            <category>vex</category>
            <category>hardware</category>
            <category>software</category>
            <category>cad</category>
        </item>
        <item>
            <title><![CDATA[Printable ESD Board Case]]></title>
            <link>https://www.roboticsisez.com/projects/esd-board-case</link>
            <guid>https://www.roboticsisez.com/projects/esd-board-case</guid>
            <pubDate>Mon, 25 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[The exclusion of a TVS diode in the VEX V5 Brain leads to ports frying when mechanisms on the robot are more prone to static.  I made a 3D printable case for custom PCBs to solve this problem.]]></description>
            <content:encoded><![CDATA[<p><a href="https://wiki.purduesigbots.com/vex-electronics/vex-electronics/vex-v5-brain/v5-electronics-observations" target="_blank" rel="noopener noreferrer">The exclusion of a TVS diode in the VEX V5 Brain</a> leads to ports frying when mechanisms on the robot are more prone to static.  I made a 3D printable case for custom PCBs to solve this problem.</p>
<p><a href="https://wiki.purduesigbots.com/vex-electronics/v5-esd-protection-board" target="_blank" rel="noopener noreferrer">https://wiki.purduesigbots.com/vex-electronics/v5-esd-protection-board</a></p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-de9e380b1b8e08620024a28ad211adc0.jpg" width="4032" height="2268" class="img_ev3q"></p>
<p>BLRS made a custom PCB with wire couplers that add a TVS diode between them.  Having a short wire from the brain to the coupler, then from the coupler to your motor makes it so the ports cannot break due to static.  These parts are explicitly illegal for competition use but are legal to use in practice.</p>
<p>My involvement was designing the 3D printable case.  There are 3 versions that hold different amounts of boards,  1, 4, and 8.  The challenge was designing parts that fit the boards snugly on multiple types of printers.  During testing I had teams try printing them on an Ender 3, Prusa Mk3, and a Prusa Mini to make sure tolerances were good no matter what printer was used.</p>]]></content:encoded>
            <category>vex</category>
            <category>hardware</category>
            <category>open source</category>
        </item>
        <item>
            <title><![CDATA[Harvard-Westlake- AMOGO x DOGO]]></title>
            <link>https://www.roboticsisez.com/projects/harvard-westlake-amogo-dogo</link>
            <guid>https://www.roboticsisez.com/projects/harvard-westlake-amogo-dogo</guid>
            <pubDate>Sat, 21 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Inspired by the 118 Everybot, Harvard-Westlake wanted to make simple, competitive designs for the VEX Robotics Competition Tipping Point.]]></description>
            <content:encoded><![CDATA[<p>Inspired by the <a href="https://www.118everybot.org/" target="_blank" rel="noopener noreferrer">118 Everybot</a>, Harvard-Westlake wanted to make simple, competitive designs for the VEX Robotics Competition Tipping Point.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/mmhPOVIbJWI?si=anLpK8ux69RY1DQh" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="about">About<a href="https://www.roboticsisez.com/projects/harvard-westlake-amogo-dogo#about" class="hash-link" aria-label="Direct link to About" title="Direct link to About">​</a></h2>
<p>Harvard-Westlake hosted three one-week long summer camps where ~12 students would come for a one-week intensive of robotics where we wanted to condense an entire season into one week.  We split students into 4 groups and had two groups make AMOGO and two groups make DOGO.  The goal of the summer camp is to teach students the importance of build quality and how it leads to consistency and longevity in every part of a robot.</p>
<p>During this one-week intensive, students learned build quality, and the importance of squaring drives, and had a full day and a half of tournaments where over 20 matches were run.  Students learned to maintain their robots as screws would come loose and learned to iterate flaws in the design in an attempt to make it more consistent.</p>
<p>My role in the summer camp was to mentor students in build quality, maintain and iterate the example robots to be more consistent and easier to assemble, and develop software for the robots that gives simple-to-use controls for students who haven't driven a robot before. I also responded to community questions on the <a href="https://www.vexforum.com/t/harvard-westlake-robotics-amogo-x-dogo-reveal/92670" target="_blank" rel="noopener noreferrer">forums</a> to make sure as much information as possible was clear about these robots.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="code">Code<a href="https://www.roboticsisez.com/projects/harvard-westlake-amogo-dogo#code" class="hash-link" aria-label="Direct link to Code" title="Direct link to Code">​</a></h2>
<p>There were two versions of the code for each robot, one made in <a href="https://www.vexrobotics.com/vexcode" target="_blank" rel="noopener noreferrer">VEXcode</a> and one made in <a href="https://pros.cs.purdue.edu/" target="_blank" rel="noopener noreferrer">PROS</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vexcode">VEXcode<a href="https://www.roboticsisez.com/projects/harvard-westlake-amogo-dogo#vexcode" class="hash-link" aria-label="Direct link to VEXcode" title="Direct link to VEXcode">​</a></h3>
<p>The VEXcode versions of the code are much simpler and more digestible.  This is what most teams use to program their robots, so I wanted this code to be easily understandable by someone who had seen very little/no code before.  Everything is in a single file and all code relating to subsystems are bunched together so students can pick apart the code piece by piece.<br>
<a href="https://github.com/Unionjackjz1/HW-AMOGO-VEXCODE/" target="_blank" rel="noopener noreferrer">AMOGO VEXcode - GitHub</a><br>
<a href="https://github.com/Unionjackjz1/HW-DOGO-VEXCODE/" target="_blank" rel="noopener noreferrer">DOGO VEXcode - GitHub</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pros">PROS<a href="https://www.roboticsisez.com/projects/harvard-westlake-amogo-dogo#pros" class="hash-link" aria-label="Direct link to PROS" title="Direct link to PROS">​</a></h3>
<p>On the other hand, the PROS versions of the code are more complex.  The code is split up into multiple files, where each subsystem has its own file.  The code for the drive base was based on the first version of <a href="https://www.roboticsisez.com/ez-template" target="_blank" rel="noopener noreferrer">EZ-Template</a>, which was my codebase that dealt with PID for getting the robot from point A to point B with very little setup.<br>
<a href="https://github.com/Unionjackjz1/HW-AMOGO-PROS/" target="_blank" rel="noopener noreferrer">AMOGO PROS - GitHub</a><br>
<a href="https://github.com/Unionjackjz1/HW-DOGO-PROS/" target="_blank" rel="noopener noreferrer">DOGO PROS - GitHub</a></p>
<p>The PROS version of the code also came with a more complex autonomous routine that could complete the Autonomous Win Point by itself.  The Autonomous Win Point is a series of tasks that an alliance must complete during Autonomous to get an additional ranking point.  Doing this task by yourself can guarantee more opportunities for additional ranking points.  Because of the importance of solo AWP, we wanted to showcase that these simple robots could accomplish it.<br>
<a href="https://youtu.be/p1lgbKy1ZBE" target="_blank" rel="noopener noreferrer">AMOGO Solo AWP Autonomous Video</a><br>
<a href="https://youtu.be/wpvR_m3cUFk" target="_blank" rel="noopener noreferrer">DOGO Solo AWP Autonomous Video</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cad">CAD<a href="https://www.roboticsisez.com/projects/harvard-westlake-amogo-dogo#cad" class="hash-link" aria-label="Direct link to CAD" title="Direct link to CAD">​</a></h2>
<p>The CAD for each robot was also released so students could look at how different parts of the robot were assembled and see parts deep in the robot clearly.  There were some unique build techniques done specifically on the drive, where screws were used instead of axles.<br>
<a href="https://drive.google.com/file/d/1teWAX4Hb_rwtznO7sPc-pv1EVGZGrDgA/view?usp=sharing" target="_blank" rel="noopener noreferrer">AMOGO CAD - STEP</a><br>
<a href="https://drive.google.com/file/d/1Y3QqJmkoS1UeejjGi8d0tq-_WFdEoL06/view?usp=sharing" target="_blank" rel="noopener noreferrer">DOGO CAD - STEP</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="scrimmages">Scrimmages<a href="https://www.roboticsisez.com/projects/harvard-westlake-amogo-dogo#scrimmages" class="hash-link" aria-label="Direct link to Scrimmages" title="Direct link to Scrimmages">​</a></h2>
<p>At the end of the day, VEX robotics is a sport where matches are played competitively.  Everything else that was done for these robots was educational, but the end goal for all of this was to compete with a robot.  Scrimmages were published of both example robots competing head to head, while I was operating DOGO.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/yB3He_QHhds?si=IOW3jZL6EZ7wj8Cw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<iframe width="560" height="315" src="https://www.youtube.com/embed/7XZg8rz2fpE?si=HI677s-tDK2tyWO3" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<iframe width="560" height="315" src="https://www.youtube.com/embed/NCoMXwhrikM?si=jPz_Y9EtdrjJtDcx" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>]]></content:encoded>
            <category>vex</category>
            <category>mentoring</category>
            <category>tutorials</category>
            <category>tipping point</category>
            <category>hardware</category>
            <category>software</category>
            <category>cad</category>
        </item>
        <item>
            <title><![CDATA[VEX CADing Tutorials]]></title>
            <link>https://www.roboticsisez.com/projects/vex-cadding-tutorials</link>
            <guid>https://www.roboticsisez.com/projects/vex-cadding-tutorials</guid>
            <pubDate>Mon, 26 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[In order to reach the demand of students wanting to learn CAD, I developed click-by-click tutorials on how to CAD using Autodesk Inventor.]]></description>
            <content:encoded><![CDATA[<p>In order to reach the demand of students wanting to learn CAD, I developed click-by-click tutorials on how to CAD using Autodesk Inventor.</p>
<p><a href="https://wiki.purduesigbots.com/vex-cad/making-a-chassis" target="_blank" rel="noopener noreferrer">https://wiki.purduesigbots.com/vex-cad/making-a-chassis</a></p>
<p>During COVID I taught CAD with Autodesk Inventor Professional to students who wanted to solidify designs without access to parts.  This was the easiest one-on-one over Zoom or Discord until it was eating hours of my time.  I decided instead to make written tutorials and the <a href="https://wiki.purduesigbots.com/" target="_blank" rel="noopener noreferrer">BLRS Wiki</a> team was kind enough to let me host them there.  After a few weeks, I made a click-by-click tutorial on how to CAD using the VEX kit of parts.  Students were now able to ask me specific questions about a topic instead of having me hold their hands through the entire process.  The website has seen tens of thousands of people and many of my students have benefited from it.</p>
<p>My goal with the tutorial was to enable students to use CAD during their design process.  I was less concerned about them using best CAD practices.  I'd rather students use CAD with worse practices than get discouraged at "rules" and never use CAD.</p>
<p>With that, there are two tutorials.  <a href="https://wiki.purduesigbots.com/vex-cad/making-a-chassis/inventor-chassis" target="_blank" rel="noopener noreferrer">One for beginners</a> to learn how to use connect parts, grounding, dark mode (obviously) and mirroring, and an <a href="https://wiki.purduesigbots.com/vex-cad/making-a-chassis/inventor-chassis-best-practices" target="_blank" rel="noopener noreferrer">advanced tutorial</a> that teaches best practices while making a slightly more complex drive base.  The advanced tutorial teaches about using origin planes, making more subassemblies, and replacing components.</p>]]></content:encoded>
            <category>vex</category>
            <category>mentoring</category>
            <category>tutorials</category>
            <category>cad</category>
            <category>open source</category>
        </item>
        <item>
            <title><![CDATA[Ooga Booga & Frank]]></title>
            <link>https://www.roboticsisez.com/projects/vex-change-up</link>
            <guid>https://www.roboticsisez.com/projects/vex-change-up</guid>
            <pubDate>Mon, 21 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Ooga Booga and Frank were the VEXU robots that my team built for Change Up.]]></description>
            <content:encoded><![CDATA[<p>Ooga Booga and Frank were the VEXU robots that my team built for Change Up.</p>
<p><a href="https://photos.app.goo.gl/YkLtHVYeikCV3UZdA" target="_blank" rel="noopener noreferrer">https://photos.app.goo.gl/YkLtHVYeikCV3UZdA</a></p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-8cb807713efe386636818bd87e6744c5.jpg" width="7952" height="4472" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ooga-booga">Ooga Booga<a href="https://www.roboticsisez.com/projects/vex-change-up#ooga-booga" class="hash-link" aria-label="Direct link to Ooga Booga" title="Direct link to Ooga Booga">​</a></h2>
<p>Ooga and Booga were tether bots that were connected by a 13ft wire.  Together they fit in size constraints as 1 robot, and because they are connected they are considered 1 robot.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/oogabooga-94be9904a96a10d930d93f80067a3df2.jpg" width="7952" height="4472" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ooga">Ooga<a href="https://www.roboticsisez.com/projects/vex-change-up#ooga" class="hash-link" aria-label="Direct link to Ooga" title="Direct link to Ooga">​</a></h3>
<p>This was the main robot that had the brain.  Ooga had 10 motors.  6 drive, 2 intake, 2 conveyor.  The intake pneumatically closed for taking balls out of the goals.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/oogafront2-955143d2bb131022e54c18bb0667f287.jpg" width="6113" height="4159" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="booga">Booga<a href="https://www.roboticsisez.com/projects/vex-change-up#booga" class="hash-link" aria-label="Direct link to Booga" title="Direct link to Booga">​</a></h3>
<p>This was the puppet robot.  Booga had 7 motors.  4 drive, 2 intake, and 1 conveyor.</p>
<p>The intake on Booga is different from Ooga or Frank, where Booga had larger wheels.  These wheels helped increase the intake range of the robot by flexing out the way.  The larger wheel meant if we hit a wall the intake would stop spinning, we solved this by putting the wheel on a 3D-printed slip clutch.</p>
<p>The conveyor had only 1 motor but needed 2 functions: holding onto balls and scoring.  This was accomplished with ratchets.  Inside the conveyor wheels are pawls and the gears all have ratchets on them.  When the motor goes in one direction, only the bottom roller spins up.  When the motor goes in the opposite direction, all of the rollers spin up.  The bottom wheel goes the same way regardless of the input because of inverted ratchets on each side, similar to <a href="https://youtu.be/y44_xMFsPQQ?si=VBdRDJc-SNT6OzlC" target="_blank" rel="noopener noreferrer">this video</a>.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/booga_1-f6e010da473645d67933e73bf44fe619.jpg" width="6247" height="4472" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="frank">Frank<a href="https://www.roboticsisez.com/projects/vex-change-up#frank" class="hash-link" aria-label="Direct link to Frank" title="Direct link to Frank">​</a></h2>
<p>Frank was a smaller 15" robot.  Frank had 11 motors.  6 drive, 2 on the intake, and 3 on the conveyor.</p>
<p>The intake on Frank was almost identical to Ooga.  Pneumatically actuated for removing balls from goals.</p>
<p>For the conveyor, Frank used rubber band rollers instead of urethane wheels.  The concept of both is the same, but on Frank, we used a harder back material and squishy rollers.</p>
<p>The center traction wheel on Frank was 3d printed, and we molded polyurethane around it.</p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/frankleft1-63ea290daf620237737ce5d20b9008eb.jpg" width="5500" height="3500" class="img_ev3q"></p>]]></content:encoded>
            <category>vex</category>
            <category>hardware</category>
            <category>software</category>
            <category>cad</category>
            <category>change up</category>
        </item>
        <item>
            <title><![CDATA[Goofy - Robot in 3 Days]]></title>
            <link>https://www.roboticsisez.com/projects/goofy-ri3d</link>
            <guid>https://www.roboticsisez.com/projects/goofy-ri3d</guid>
            <pubDate>Thu, 27 Jun 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Goofy was a RI3D (robot in 3 days) that I participated in during the start of Tower Takeover.  We gave ourselves 72 hours to go from no design to a fully complete robot.   At the end of 72 hours we filmed a reveal, made the code public, and made a VEXforum post to further share the design, and I edited a documentary that explains our design process.  Combined the reveal and documentary have over 200k views.]]></description>
            <content:encoded><![CDATA[<p>Goofy was a RI3D (robot in 3 days) that I participated in during the start of Tower Takeover.  We gave ourselves 72 hours to go from no design to a fully complete robot.   At the end of 72 hours we filmed a <a href="https://youtu.be/QJI29QI5COM?si=_CvPY3BqpIup5Bqw" target="_blank" rel="noopener noreferrer">reveal</a>, made the <a href="https://github.com/Unionjackjz1/Goofy-RI3D" target="_blank" rel="noopener noreferrer">code public</a>, and made a <a href="https://www.vexforum.com/t/448x-21s-6671x-and-1437z-ri3d-reveal/62602" target="_blank" rel="noopener noreferrer">VEXforum post</a> to further share the design, and I edited a <a href="https://youtu.be/BC4ZlIcBB7I?si=Kft1lqWfc1Vl6-A9" target="_blank" rel="noopener noreferrer">documentary</a> that explains our design process.  Combined the reveal and documentary have over 200k views.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/BC4ZlIcBB7I?si=6x4MY6_HmAneCHuN" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>]]></content:encoded>
            <category>vex</category>
            <category>hardware</category>
            <category>software</category>
            <category>tower takeover</category>
        </item>
        <item>
            <title><![CDATA[Turning Point - Keke]]></title>
            <link>https://www.roboticsisez.com/projects/keke</link>
            <guid>https://www.roboticsisez.com/projects/keke</guid>
            <pubDate>Tue, 30 Apr 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Keke was my team's final competitive robot for the VRC season Turning point, my senior year of high school.  This robot used a catapult to shoot two balls at once to shoot two flags at once, could pick up and score caps and place them on poles, and could scrape balls off of caps or the platform.]]></description>
            <content:encoded><![CDATA[<p>Keke was my team's final competitive robot for the VRC season Turning point, my senior year of high school.  This robot used a catapult to shoot two balls at once to shoot two flags at once, could pick up and score caps and place them on poles, and could scrape balls off of caps or the platform.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ist1h6ZTdDc?si=6TjNYwcKvkhvQO0I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>This robot was started in late October and was the robot we took to the World Championship, the culmination of all of the work we put in throughout High School.</p>
<p>My contributions as team captain went to every aspect of the robot.  I wrote autonomous routines using motion profiling, and adding automation while operating to make it easier on the driver.  I designed different stable and low-slop joints than Pancake, but most of all designed a robot that required very little maintenance after taking a beating.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/worlds-35d80d155b69486c6a75ff06af7e00be.jpg" width="4032" height="3024" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notebook">Notebook<a href="https://www.roboticsisez.com/projects/keke#notebook" class="hash-link" aria-label="Direct link to Notebook" title="Direct link to Notebook">​</a></h2>
<p>In VEX teams can create engineering notebooks and can win awards based on those notebooks and an interview process.  This is the notebook, our build/software log, that we made for this robot.</p>
<p>This was never finished, so I'll add a summary of the remainder of the season below.</p>
<p><a href="https://docs.google.com/document/d/1omhGB65uhTlaZRZvgxiF9jmN33fIssLbpcdErRU2LSE/edit?usp=sharing" target="_blank" rel="noopener noreferrer">https://docs.google.com/document/d/1omhGB65uhTlaZRZvgxiF9jmN33fIssLbpcdErRU2LSE/edit?usp=sharing</a></p>
<p>We took the robot to SLO and were very happy with the performance, ranking 3rd and advancing to the finals.  Our biggest shortcoming was our autonomous not doing enough.  To be fair to our SLO performance, we were working on such a short schedule with how recently we got V5 and were able to put everything on the robot.  But there was something new we wanted to try.</p>
<p>Teams have started making mechanisms to intake the balls off of caps during autonomous and using them to increase the efficiency of their paths.  We have an extra motor but would like to use it elsewhere, so we came up with a passive idea.  When our cap arm was raised it would release a rubber band allowing this standoff to fall into a cap, and when we drove backward the ball would tip into our robot.  This worked ok but was inconsistent and hindered intaking. So we decided to try something else.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/sLf9FCNjxXg?si=PpYmkTMX0hM2RHRr" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>We decided to go a more typical route and make a motored arm, we called this a scraper.  This allowed us to tip caps, flip caps, and take balls off of caps and the platform.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/q3p2t34UsUw?si=WRuaxvga89343oH4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>Soon we had to compete at Google, a signature event, where the winners would qualify for the World Championship.  We continued to practice and iterate on mechanisms that would fail to make them more robust.  We got picked in 8th place, and we made it to the semi-finals where we lost to the champions.  But, our Quarter Finals match is a good one.  We were against 1st place and our alliance was having trouble and was working on the robot.  The event couldn't wait any longer so we had to play as 1 team against 2.  And against all odds (with some luck) we ended up winning the match!</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/W3HrmSFPUpA?si=sLM_iQXf683_HbLx" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>We ended up taking this robot to the State Championship and got picked for eliminations by 2nd place, and we advanced to Finals which qualified us for the World Championship.</p>
<p>Between the State Championship and World Championship we wanted to iterate everything.  Our drive struggled to get onto the platform, and our intake wasn't very fast, our scraper would get caught in the net sometimes.</p>
<p>We started fixing our list of problems by changing the shape of our drive.  We exposed the front wheel so as we climbed the platform it was easier to get on.  We also redid our intake structure to make sure it was much stronger.
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/start_of_rebuild-fc38eb9978f3406aaa117da305d86d10.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>To stop our scraper from getting entangled in the net we angled it back farther.  This required changing how the structure was done and needed chains instead of gears to fit everything.<br>
<img loading="lazy" src="https://www.roboticsisez.com/assets/images/scraper-ecf4bba94c90c856692e89e81efe2da1.jpg" width="4032" height="3024" class="img_ev3q"></p>
<p>A big criticism of double catapults is the inability to shoot 1 ball at a time.  We had space for a ball to sit in our intake, so we added a sensor to detect a ball there and stop the intake.  This allowed us flexibility in scoring, and to not waste 2 balls when we only needed to score 1 flag.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/V6CQSywE5aw?si=X8tKsGa6JgXnVQVj" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<iframe width="560" height="315" src="https://www.youtube.com/embed/iCO3P55ZqEU?si=ol17lvWTlesXVRUx" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>And then it was off to the world championships!  We went 7-3, got picked by the 3rd seed, and advanced to the finals of our division.  And we got some pretty good highlights...</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/AX5zH4IKJ5M?si=oKlNfiKg78-kU9UU" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>]]></content:encoded>
            <category>vex</category>
            <category>turning point</category>
            <category>software</category>
            <category>hardware</category>
            <category>cad</category>
        </item>
        <item>
            <title><![CDATA[Spoon Wars]]></title>
            <link>https://www.roboticsisez.com/projects/spoonwars</link>
            <guid>https://www.roboticsisez.com/projects/spoonwars</guid>
            <pubDate>Sun, 17 Feb 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Spoon Wars was a pre-COVID tradition at CHAMPS Charter High School, where every senior was given a spoon and had to tag out another senior who wasn't holding their spoon.  In my senior year, some students in robotics were hosting it so I decided to use Google Sheets to make scores more clear.  Without this, scores are texted to a game master and they have to share what the scores are when they can.  Now anyone can click this link and see scores.]]></description>
            <content:encoded><![CDATA[<p>Spoon Wars was a pre-COVID tradition at CHAMPS Charter High School, where every senior was given a spoon and had to tag out another senior who wasn't holding their spoon.  In my senior year, some students in robotics were hosting it so I decided to use <a href="https://docs.google.com/spreadsheets/d/1-Mcza29aSLZmGfXjjmtLiWaP_RBs_sX8DOSbPZp0WEk/edit?usp=sharing" target="_blank" rel="noopener noreferrer">Google Sheets</a> to make scores more clear.  Without this, scores are texted to a game master and they have to share what the scores are when they can.  Now anyone can click this link and see scores.</p>
<p><img loading="lazy" src="https://www.roboticsisez.com/assets/images/banner-cba31a687506aa23edb1771606ab4401.jpg" width="1242" height="582" class="img_ev3q"></p>
<p>Each week was a phase that had a spin on the game.  In the first week we had Academy Wars, where everyone in the same academy was safe from each other and they had to tag other academy members out, and the second week we gave the top 3 winners a second spoon as a second life.  Interest in the game fizzled out after the second week and the game stopped.</p>
<p>This was my first time using Google Sheets.  I decided to make each week a phase, and we put a spin on the game every week.  Having a dedicated sheet for each week made it easy to have other trusted people input scores.</p>
<p>The sheet automatically condenses white space from lists, removes people from lists once they are out, and automatically creates the top 10 on the front page.  The skills I learned from making this enabled me to be proficient at Google Sheets for projects in the future.</p>]]></content:encoded>
            <category>software</category>
            <category>google sheets</category>
        </item>
    </channel>
</rss>