<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Pure Pursuit | ez robotics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ez-robotics.github.io/EZ-Site/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ez-robotics.github.io/EZ-Site/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ez-robotics.github.io/EZ-Site/projects/pure-pursuit"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Pure Pursuit | ez robotics"><meta data-rh="true" name="description" content="Pure Pursuit is a path-tracking algorithm that enables a robot to chase a &quot;carrot on a stick&quot;."><meta data-rh="true" property="og:description" content="Pure Pursuit is a path-tracking algorithm that enables a robot to chase a &quot;carrot on a stick&quot;."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-03-21T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://roboticsisez.com"><meta data-rh="true" property="article:tag" content="vex,software,wip"><link data-rh="true" rel="icon" href="/EZ-Site/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ez-robotics.github.io/EZ-Site/projects/pure-pursuit"><link data-rh="true" rel="alternate" href="https://ez-robotics.github.io/EZ-Site/projects/pure-pursuit" hreflang="en"><link data-rh="true" rel="alternate" href="https://ez-robotics.github.io/EZ-Site/projects/pure-pursuit" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/EZ-Site/projects/rss.xml" title="ez robotics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/EZ-Site/projects/atom.xml" title="ez robotics Atom Feed"><link rel="stylesheet" href="/EZ-Site/assets/css/styles.107cd0da.css">
<script src="/EZ-Site/assets/js/runtime~main.04000031.js" defer="defer"></script>
<script src="/EZ-Site/assets/js/main.b904eb50.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/EZ-Site/"><b class="navbar__title text--truncate">robotics is ez</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/EZ-Site/projects">Projects</a><a href="https://ez-robotics.github.io/EZ-Template/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">EZ-Template Docs</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/EZ-Site/about">About</a><a href="https://github.com/EZ-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All My Projects</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/dd-3">DD-3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/adaptive-pid">Adaptive PID</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/spraypaint-booth">Spraypaint Booth</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/french-cleats">French Cleats</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/about-ez-template">EZ-Template</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/EZ-Site/projects/pure-pursuit">Pure Pursuit</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/the-pushbot">The Pushbot</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/supernova-spectacular-awards">Supernova Spectacular Awards</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/preload-disc-holder">Preload Disc Holder</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/about-ez-gui">EZ GUI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/harvard-westlake-blz-i">Harvard-Westlake- BLZ-i</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/vexcode-tutorials">VEXcode Tutorials</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/dave">Dave</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/esd-board-case">Printable ESD Board Case</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/harvard-westlake-amogo-dogo">Harvard-Westlake- AMOGO x DOGO</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/vex-cadding-tutorials">VEX CADing Tutorials</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/vex-change-up">Ooga Booga &amp; Frank</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/goofy-ri3d">Goofy - Robot in 3 Days</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/keke">Turning Point - Keke</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/spoonwars">Spoon Wars</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/pancake">Turning Point - Pancake</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/middle-in-the-zone">Middle of In the Zone</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/rerun">Rerun</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/minecraft-plugin-core">Minecraft Plugin - Core</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/nerf-destiny">Destiny Nerf Blaster</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/EZ-Site/projects/nerf-mavshot">Mavshot Nerf Blaster</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Pure Pursuit is a path-tracking algorithm that enables a robot to chase a &quot;carrot on a stick&quot;."><header><h1 class="title_f1Hy" itemprop="headline">Pure Pursuit</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-03-21T00:00:00.000Z" itemprop="datePublished">March 21, 2023</time> Â· <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://roboticsisez.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/Unionjackjz1.png" alt="Jess Zarchi" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://roboticsisez.com" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jess Zarchi</span></a></div><small class="avatar__subtitle" itemprop="description">Roboticist</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p><a href="https://www.mathworks.com/help/nav/ug/pure-pursuit-controller.html" target="_blank" rel="noopener noreferrer">Pure Pursuit</a> is a path-tracking algorithm that enables a robot to chase a &quot;carrot on a stick&quot;.</p>
<p><img loading="lazy" src="data:image/png;base64,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" width="579" height="189" class="img_ev3q"></p>
<hr>
<p>Pure Pursuit is a tracking algorithm that allows a robot to follow a given path by following a point some distance ahead like a carrot on a stick.  It requires some way of knowing where your current position is and a generated path.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="position-tracking">Position Tracking<a href="#position-tracking" class="hash-link" aria-label="Direct link to Position Tracking" title="Direct link to Position Tracking">â</a></h2>
<p>Position tracking is a piece of code that given 2 or 3 encoders you can extrapolate the X, Y, and angle of the robot.</p>
<p>This is explained far better by others, and here are the resources that I used:<br>
<a href="https://wiki.purduesigbots.com/software/odometry" target="_blank" rel="noopener noreferrer">5225A Tracking Documentation</a><br>
<a href="https://www.youtube.com/watch?v=_T6KHywSP58" target="_blank" rel="noopener noreferrer">QUEEN Video Explanation</a></p>
<p>This code relies on the speed at which sensors update, because it figures out the change in position over the time it takes for sensors to update, and adds that change to a current global value.</p>
<p><code>LEFT_OFFSET</code> and <code>RIGHT_OFFSET</code> are the &quot;track width&quot;.  This is the width between the tracking wheels on the robot,  I have them split into 2 variables because technically they do not need to be the same number.<br>
<code>CENTER_OFFSET</code> is the distance from a perpendicular tracking wheel to the turning center of the robot.  This number can actually be anything, but the nicest way is for this to align with the robot&#x27;s turning center.  This can be tuned by turning the robot in place and adjusting this number until the XY stops rotating around the robot.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">tracking_task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> c_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> l </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// delta distance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> l_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> r_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> c_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> radius_r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> radius_c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> h </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> h2 </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// rad for big circle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> beta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> alpha </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> theta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> Xx </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> Yy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> Xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> Yx </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">while</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token boolean" style="color:hsl(29, 54%, 61%)">true</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">get_raw_left</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">get_raw_right</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    c_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">get_raw_center</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> l_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> l_last</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> r_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> r_last</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> c_current </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> c_last</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    l_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> l_current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    r_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> r_current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    c_last </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> c_current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> width </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> LEFT_OFFSET </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> RIGHT_OFFSET</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// diff between wheels for correcting turning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    theta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">l </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> r</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> width</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">theta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">!=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      radius_r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      beta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> theta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">2.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      h </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">radius_r </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> RIGHT_OFFSET</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">beta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">2.0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      radius_c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      h2 </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">radius_c </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> CENTER_OFFSET</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">2.0</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">beta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      h </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> l</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      h2 </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      beta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    alpha </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> angle_rad </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> beta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    Xx </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> h2 </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">cos</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">alpha</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    Xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> h2 </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">alpha</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    Yx </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> h </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">alpha</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    Yy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> h </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">cos</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">alpha</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">x </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">Xx </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> Yx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> TICK_PER_INCH</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">y </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">Xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> Yy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> TICK_PER_INCH</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    angle_rad </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+=</span><span class="token plain"> theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">theta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">to_deg</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">angle_rad</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    pros</span><span class="token double-colon punctuation" style="color:hsl(220, 14%, 71%)">::</span><span class="token function" style="color:hsl(207, 82%, 66%)">delay</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mecanum-drive">Mecanum Drive<a href="#mecanum-drive" class="hash-link" aria-label="Direct link to Mecanum Drive" title="Direct link to Mecanum Drive">â</a></h2>
<p>Mecanum wheels allow the robot to move forward / backward and side to side.  These wheels get their own section here because they are effectively a cheat code for getting this code to work.  Because they can strafe, any error that&#x27;s accumulated along the way can be accounted for.  With a drivetrain that cannot strafe, if you aren&#x27;t following the path as exactly as you can, it becomes extremely difficult to account for it later.  This is why I chose this drive first, it allows me to go through all of this code without the problems that a typical drivetrain would give me.
<img loading="lazy" src="/EZ-Site/assets/images/mecan_cad-7d3c32c0f976116b22930481f9921207.png" width="1405" height="812" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="point-to-point">Point to Point<a href="#point-to-point" class="hash-link" aria-label="Direct link to Point to Point" title="Direct link to Point to Point">â</a></h3>
<p>To get the robot to move to a new target point, I need to calculate the amount the robot needs to move in the X direction, the amount the robot needs to move in the Y direction, and the amount the robot needs to move in turn.</p>
<p>The direction the robot moves will change depending on the desired end angle. Some trigonometry is done to figure out the relative directions the robot needs to go, as while the robot turns the motor powers will all change.</p>
<p>The final thing to do is scale everything down.  If X output and Y output both exceed the maximum power that can be sent to the motors, even if one is magnitudes larger than the other, the robot will end up going straight.  We solve this by scaling everything down to a larger number.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ZbMDKJ0zA3o?si=T7nrteA03m6vQWDE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">point_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Compute PID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  xPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">compute</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  yPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">compute</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  aPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">compute</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">get_angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Vector math</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> angle </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">to_rad</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">get_angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> raw_x_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">xPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">cos</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">yPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> raw_y_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">yPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">cos</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">xPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sin</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">angle</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> raw_a_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> aPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">output</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Set output powers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> x_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> y_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> a_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">clip_num</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_a_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">60</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token number" style="color:hsl(29, 54%, 61%)">60</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> max_xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">110</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Vector scaling </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> max_xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">||</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> max_xy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> scale </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> max_xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      x_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">clip_num</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> max_xy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain">max_xy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      y_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_y_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> scale</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> scale </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> max_xy </span><span class="token operator" style="color:hsl(207, 82%, 66%)">/</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      x_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_x_power </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> scale</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      y_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">clip_num</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> max_xy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain">max_xy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    x_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_x_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    y_output </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> raw_y_power</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Set motors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">raw_set_drive</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">x_output</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> y_output</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> a_output</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Mecanum drives that use the VRC wheels are slower when strafing than in forward / backward.  Because of this, I knew I&#x27;d want a mode where the robot would go straight for most of the motion and then turn at the end to face the desired angle.</p>
<p>This piece of code was added to the above function.  It modifies the target angle depending on how far away the robot is from the target position.  If it&#x27;s more than 12&quot; away, the robot will go faster and face the target position.  Once the robot is within 12&quot; of the target it&#x27;ll start to rotate to the desired angle.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/pIiadWcYlac?si=JW_q3pCaxF9RjtR2" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Add for direction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> dir </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> REV </span><span class="token operator" style="color:hsl(207, 82%, 66%)">?</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">180</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Set angle target</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">double</span><span class="token plain"> a_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">fast_move</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">distance_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">12</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      only_look_at_point </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(29, 54%, 61%)">false</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      only_look_at_point </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token boolean" style="color:hsl(29, 54%, 61%)">true</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">only_look_at_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">absolute_angle_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> add</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Compute angle PID and find the shortest path to the angle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  aPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">set_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">relative_angle_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">a_target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  aPID</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">compute</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="paths-with-strafe">Paths with Strafe<a href="#paths-with-strafe" class="hash-link" aria-label="Direct link to Paths with Strafe" title="Direct link to Paths with Strafe">â</a></h3>
<p>The paths the robot will follow will be points the user inputs.  In the example below, the robot will start at (0, 0), travel to (0, 24), then to (24, 24), then back to (0, 0).</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">autonomous</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">pure_pursuit</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">24</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> FAST_MOVE_FWD</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">         </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">24</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">24</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> FAST_MOVE_FWD</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">         </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> FAST_MOVE_REV</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">wait_drive</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once I have a list of points, to decide which point to go to next I see how far away the robot is from the next point.  The target position gets shifted until we&#x27;re looking at a point that is a distance away from the robot, and it keeps changing until we&#x27;re at the final position in the list.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:hsl(286, 60%, 67%)">void</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">pure_pursuit</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">raw_move_odom</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">movements</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">pp_index</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">distance_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">movements</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">pp_index</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">x</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> movements</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">pp_index</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">y</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">5</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    pp_index</span><span class="token operator" style="color:hsl(207, 82%, 66%)">++</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">pp_index </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;=</span><span class="token plain"> movements</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">size</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      pp_index </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> movements</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token function" style="color:hsl(207, 82%, 66%)">size</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">-</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">point_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>I cleaned up how the &quot;turn type&quot; is handled.  There are now 3 turn types:<br>
<code>FAST_MOVE</code> where the robot faces the target position and within 12&quot; will move to the final angle
<code>LOOK_AT_TARGET</code> where the robot doesn&#x27;t care about the end angle, and will always look at the target
<code>HOLD_ANGLE</code> where the robot will just hold its angle</p>
<p>I had to add <code>LOOK_AT_TARGET</code> because the distance away from the current target was less than 12&quot;, and the robot would always hold an angle even if I didn&#x27;t want it to.  This lets me use <code>FAST_MOVE</code> as intended, and have all of my injected points follow <code>LOOK_AT_TARGET</code>.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/aUpCYLBIhE0?si=LELL8e9J1XWCjrY3" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#373737"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F2F2F2;background-color:#373737"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Add for direction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">int</span><span class="token plain"> add </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> current_turn_type </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> FAST_MOVE_REV </span><span class="token operator" style="color:hsl(207, 82%, 66%)">||</span><span class="token plain"> LOOK_AT_TARGET_REV </span><span class="token operator" style="color:hsl(207, 82%, 66%)">?</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">180</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Set angle target</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">current_turn_type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Looks at the target until final distance then goes to the final angle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">case</span><span class="token plain"> FAST_MOVE_FWD</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">case</span><span class="token plain"> FAST_MOVE_REV</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">distance_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> TURN_FAST_MOVE</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">absolute_angle_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> add</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">break</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Looks at target the entire motion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">case</span><span class="token plain"> LOOK_AT_TARGET_FWD</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">case</span><span class="token plain"> LOOK_AT_TARGET_REV</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">fabs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token function" style="color:hsl(207, 82%, 66%)">distance_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> STOP_UPDATING_ANGLE</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">absolute_angle_to_point</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> add</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">break</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#ff63c2;font-style:italic">// Holds angle the entire motion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">case</span><span class="token plain"> HOLD_ANGLE</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      a_target </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">theta</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">default</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">      </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">break</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="final-mecanum">Final Mecanum<a href="#final-mecanum" class="hash-link" aria-label="Direct link to Final Mecanum" title="Direct link to Final Mecanum">â</a></h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/pVcdgffsMnA?si=P3Cc8XRpN6KGd6hI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<iframe width="560" height="315" src="https://www.youtube.com/embed/A_Q_yBHhWSY?si=9qDZo20ImXHNNA5K" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tank-drive">Tank Drive<a href="#tank-drive" class="hash-link" aria-label="Direct link to Tank Drive" title="Direct link to Tank Drive">â</a></h2>
<p>Now the goal is to get this all working properly on a tank drive setup.  I have a kind of working version <a href="https://github.com/EZ-Robotics/peewee" target="_blank" rel="noopener noreferrer">here</a> but I didn&#x27;t have a lot of time with that robot to really iron everything out.  More will be coming soon.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/EZ-Site/projects/tags/vex">vex</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/EZ-Site/projects/tags/software">software</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/EZ-Site/projects/tags/wip">wip</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/EZ-Site/projects/about-ez-template"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">EZ-Template</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/EZ-Site/projects/the-pushbot"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">The Pushbot</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#position-tracking" class="table-of-contents__link toc-highlight">Position Tracking</a></li><li><a href="#mecanum-drive" class="table-of-contents__link toc-highlight">Mecanum Drive</a><ul><li><a href="#point-to-point" class="table-of-contents__link toc-highlight">Point to Point</a></li><li><a href="#paths-with-strafe" class="table-of-contents__link toc-highlight">Paths with Strafe</a></li><li><a href="#final-mecanum" class="table-of-contents__link toc-highlight">Final Mecanum</a></li></ul></li><li><a href="#tank-drive" class="table-of-contents__link toc-highlight">Tank Drive</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://ez-robotics.github.io/EZ-Template/" target="_blank" rel="noopener noreferrer" class="footer__link-item">EZ-Template</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.instagram.com/roboticsisez" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/EZ-Site/about">About Me</a></li><li class="footer__item"><a href="https://github.com/EZ-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 robotics is ez - built with docusaurus</div></div></div></footer></div>
</body>
</html>